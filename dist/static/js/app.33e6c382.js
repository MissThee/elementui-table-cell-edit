(function(e){function n(n){for(var i,d,r=n[0],a=n[1],s=n[2],p=0,u=[];p<r.length;p++)d=r[p],Object.prototype.hasOwnProperty.call(l,d)&&l[d]&&u.push(l[d][0]),l[d]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);c&&c(n);while(u.length)u.shift()();return o.push.apply(o,s||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],i=!0,r=1;r<t.length;r++){var a=t[r];0!==l[a]&&(i=!1)}i&&(o.splice(n--,1),e=d(d.s=t[0]))}return e}var i={},l={app:0},o=[];function d(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,d),t.l=!0,t.exports}d.m=e,d.c=i,d.d=function(e,n,t){d.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,n){if(1&n&&(e=d(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(d.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)d.d(t,i,function(n){return e[n]}.bind(null,i));return t},d.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(n,"a",n),n},d.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},d.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],a=r.push.bind(r);r.push=n,r=r.slice();for(var s=0;s<r.length;s++)n(r[s]);var c=a;o.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"06d4":function(e,n){e.exports="data:image/png;base64,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"},"2ece":function(e,n,t){var i=t("fdc8");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var l=t("499e").default;l("c5d480bc",i,!0,{sourceMap:!0,shadowMode:!1})},"549a":function(e,n){e.exports="data:image/png;base64,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"},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("f751"),t("097d");var i=t("8bbf"),l=t.n(i),o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("table-cell-edit")],1)},d=[],r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticStyle:{padding:"5px"}},[t("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.addNewRowHandler}},[e._v("新增")]),t("el-button",{attrs:{type:"success",plain:"",size:"mini",icon:"el-icon-success"},on:{click:e.submitHandler}},[e._v("提交保存")]),t("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"70px"}},[e._v("角标颜色")]),t("el-tag",{staticStyle:{"font-size":"12px","margin-right":"5px"},attrs:{size:"mini"}},[e._v("预增加")]),t("el-tag",{staticStyle:{"font-size":"12px","margin-right":"5px"},attrs:{size:"mini",type:"warning"}},[e._v("预修改")]),t("el-tag",{staticStyle:{"font-size":"12px","margin-right":"5px"},attrs:{size:"mini",type:"danger"}},[e._v("预删除")])],1),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#666"}},[e._v("快捷键（编辑单元格时）：")])]),t("div",{staticStyle:{"margin-left":"5px"}},[t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"80px"}},[e._v("下一单元格")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Tab")])],1),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"80px"}},[e._v("上一单元格")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Shift")]),t("span",[e._v("+")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Tab")])],1),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"80px"}},[e._v("撤销修改")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Shift")]),t("span",[e._v("+")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Backspace")])],1),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"80px"}},[e._v("完成编辑")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Esc")])],1)]),t("el-button",{staticStyle:{float:"right"},attrs:{slot:"reference",type:"warning",plain:"",size:"mini"},slot:"reference"},[t("i",{staticClass:"el-icon-question"}),e._v("使用帮助")])],1)],1),t("el-table",{ref:"Table",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData.filter((function(n){return!e.search||n.name.toLowerCase().includes(e.search.toLowerCase())})),height:500,"row-class-name":e.tableRowClassName,"cell-class-name":e.tableCellClassName},on:{"cell-click":e.cellClickHandler}},[t("el-table-column",{attrs:{label:"日期",prop:"date"}}),e._l(e.columnOption,(function(n){return t("el-table-column",{key:n.prop,attrs:{"column-key":n.columnKey,label:n.label,prop:n.propText},scopedSlots:e._u([{key:"header",fn:function(n){return[t("div",{staticStyle:{float:"left",width:"60px"}},[e._v(e._s(n.column.label))])]}},{key:"default",fn:function(i){return[t("div",{directives:[{name:"show",rawName:"v-show",value:!(e.isEditingCell(i)&&n.editType),expression:"!(isEditingCell(scope)&&item.editType)"}]},[e._v(e._s(i.row[n.propText]))]),e.isEditingCell(i)&&n.editType?t("div",{staticStyle:{display:"table"}},[t("div",{staticStyle:{display:"table-cell",width:"100%"}},["Input"===n.editType?t("el-input",{ref:e.buildCellRef(i.row._hiddenRowId,i.column.id),refInFor:!0,on:{blur:e.editCellBlurHandler},model:{value:i.row[n.propId],callback:function(t){e.$set(i.row,n.propId,t)},expression:"scope.row[item.propId]"}}):e._e(),t("el-tooltip",{attrs:{placement:"top",manual:"",content:"此值需要为数字",effect:"dark"},model:{value:e.showValueCheckMsg,callback:function(n){e.showValueCheckMsg=n},expression:"showValueCheckMsg"}},["InputNumber"===n.editType?t("el-input",{ref:e.buildCellRef(i.row._hiddenRowId,i.column.id),refInFor:!0,attrs:{placeholder:"输入数字",min:0,max:1e8,controls:!1},on:{blur:e.editCellBlurHandler,focus:e.checkEditingValueIsNaN,input:e.checkEditingValueIsNaN},model:{value:i.row[n.propId],callback:function(t){e.$set(i.row,n.propId,t)},expression:"scope.row[item.propId]"}}):e._e()],1),"DatePicker"===n.editType?t("el-date-picker",{ref:e.buildCellRef(i.row._hiddenRowId,i.column.id),refInFor:!0,attrs:{clearable:!1,size:"mini","prefix-icon":" ",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{blur:e.editCellBlurHandler},model:{value:i.row[n.propId],callback:function(t){e.$set(i.row,n.propId,t)},expression:"scope.row[item.propId]"}}):e._e(),"Select"===n.editType?t("el-select",{ref:e.buildCellRef(i.row._hiddenRowId,i.column.id),refInFor:!0,attrs:{filterable:"","automatic-dropdown":!0,placeholder:"请选择"},on:{blur:e.editCellBlurHandler,change:e.editCellBlurHandler},model:{value:i.row[n.propId],callback:function(t){e.$set(i.row,n.propId,t)},expression:"scope.row[item.propId]"}},e._l(n.selectList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1),t("div",{staticStyle:{margin:"0 0 0 3px"},style:{width:52/(i.row._hiddenRowId.startsWith("A")?2:1)+"px"}},[t("el-popconfirm",{attrs:{title:"确定撤销更改？"},on:{onConfirm:e.revokeEditingValueHandler}},[i.row._hiddenRowId.startsWith("A")?e._e():t("el-button",{staticStyle:{margin:"0"},attrs:{slot:"reference",title:"撤销更改(Shift+Backspace)",type:"danger",plain:"",size:"mini",icon:"el-icon-refresh-left"},slot:"reference"})],1),t("el-button",{staticStyle:{margin:"0"},attrs:{title:"完成编辑(Esc)",type:"success",plain:"",size:"mini",icon:"el-icon-check"},on:{click:e.finishEdit}})],1)]):e._e()]}}],null,!0)})})),t("el-table-column",{attrs:{width:"100px",label:"选择-id",prop:"selectValue"}}),t("el-table-column",{attrs:{width:"100px",label:"选择-text",prop:"selectName"}}),t("el-table-column",{attrs:{width:"100px",fixed:"right",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{staticStyle:{"font-size":"12px"},attrs:{type:n.row._hiddenRowId.startsWith("D")?"success":"danger",plain:"",size:"mini",icon:n.row._hiddenRowId.startsWith("D")?"el-icon-refresh-left":"el-icon-delete"},on:{click:function(t){return e.deleteRowHandler(n.row)}}},[e._v("\n          "+e._s(n.row._hiddenRowId.startsWith("D")?"取消":"删除")+"\n        ")])]}}])})],2)],1)},a=[],s=(t("456d"),t("8615"),t("5df3"),t("4f7f"),t("75fc")),c=(t("ac4d"),t("8a81"),t("ac6a"),t("6b54"),t("f559"),{name:"TableCellEdit",data:function(){return{hiddenRowIdProp:"_hiddenRowId",search:"",tableData:[],tableDataOrigin:[],editingCellInfo:{rowId:void 0,columnId:void 0,columnKey:void 0},changedCellInfo:{},wrongCellInfo:{},tableColumnProperties:[],showValueCheckMsg:!1,columnOption:[{columnKey:"name",label:"名称",propId:"name",propText:"name",editType:"Input"},{columnKey:"address",label:"住址",propId:"address",propText:"address",editType:"Input"},{columnKey:"date",label:"时间编辑",propId:"date",propText:"date",editType:"DatePicker"},{columnKey:"age",label:"年龄",propId:"age",propText:"age",editType:"InputNumber"},{columnKey:"height",label:"身高",propId:"height",propText:"height"},{columnKey:"selectCell",label:"选择",propId:"selectValue",propText:"selectName",editType:"Select",selectList:[{value:1,label:"1黄金糕"},{value:2,label:"2双皮奶"},{value:3,label:"3蚵仔煎"},{value:4,label:"4龙须面"},{value:5,label:"5北京烤鸭"}]}],newRowHiddenId:1}},created:function(){this.initCanEditColumns(),this.requestTableData()},methods:{tableRowClassName:function(e){var n=e.row;e.rowIndex;return n._hiddenRowId.startsWith("A")?"pre-add-row":n._hiddenRowId.startsWith("D")?"pre-delete-row":""},tableCellClassName:function(e){var n=e.row,t=e.column,i=(e.rowIndex,e.columnIndex,"");return this.changedCellInfo[n._hiddenRowId]&&this.changedCellInfo[n._hiddenRowId][t.id]&&(i+=" pre-update-cell"),this.wrongCellInfo[n._hiddenRowId]&&this.wrongCellInfo[n._hiddenRowId][t.id]&&(i+=" wrong-cell-info"),i},pad:function(e,n){var t=[],i=n-e.toString().length;return i<=0?e:(t[i]||(t[i]=new Array(i+1).join("0")),t[i]+e)},buildNewRowHiddenId:function(){var e="A"+this.pad(this.newRowHiddenId,16);return this.newRowHiddenId++,e},initTableDataAndTableDataOrigin:function(){var e=1,n=!0,t=!1,i=void 0;try{for(var l,o=this.tableData[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var d=l.value;d._hiddenRowId=this.pad(e,16),e++}}catch(r){t=!0,i=r}finally{try{n||null==o.return||o.return()}finally{if(t)throw i}}this.tableDataOrigin=JSON.parse(JSON.stringify(this.tableData))},initCanEditColumns:function(){var e=this;this.tableColumnProperties=[],this.$nextTick((function(){var n=!0,t=!1,i=void 0;try{for(var l,o=e.$refs.Table.columns[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var d=l.value;d.columnKey&&e.tableColumnProperties.push({columnId:d.id,columnKey:d.columnKey})}}catch(r){t=!0,i=r}finally{try{n||null==o.return||o.return()}finally{if(t)throw i}}}))},buildCellRef:function(e,n){return"Cell_"+e+"_"+n},isEditingCell:function(e){return this.editingCellInfo.rowId===e.row._hiddenRowId&&this.editingCellInfo.columnId===e.column.id&&this.editingCellInfo.columnKey===e.column.columnKey},cellClickHandler:function(e,n,t,i){this.startEdit(e,n)},startEdit:function(e,n){this.setEditKeyListener(!1),this.setEditKeyListener(!0),this.editingCellInfo.rowId=e._hiddenRowId,this.editingCellInfo.columnId=n.id,this.editingCellInfo.columnKey=n.columnKey,this.editingCellFocusAndSelect()},finishEdit:function(){this.editingCellInfo={rowId:void 0,columnId:void 0,columnKey:void 0},this.setEditKeyListener(!1)},editingCellFocusAndSelect:function(){var e=this,n=this.editingCellInfo.rowId,t=this.editingCellInfo.columnId;this.$nextTick((function(){var i=e.$refs[e.buildCellRef(n,t)];i&&i.length>0&&(i[0].select?i[0].select():i[0].focus&&i[0].focus())}))},editCellBlurHandler:function(){var e=this;this.$nextTick((function(){e.showValueCheckMsg=!1}));var n=this.getEditingCellProps();switch(n.editType){case"InputNumber":var t=this.checkEditingValueIsNaN();this.setEditingCellInfo(this.wrongCellInfo,t);break;case"Select":var i=this.getEditingRow(),l=n.selectList,o=null,d=!0,r=!1,a=void 0;try{for(var s,c=l[Symbol.iterator]();!(d=(s=c.next()).done);d=!0){var p=s.value;p.value===i[n.propId]&&(o=p.label)}}catch(u){r=!0,a=u}finally{try{d||null==c.return||c.return()}finally{if(r)throw a}}this.$set(i,n.propId,i[n.propId]),this.$set(i,n.propText,o);break}this.setEditingCellInfo(this.changedCellInfo,this.checkEditingValueIsChanged())},revokeEditingValueHandler:function(){var e=this.getEditingCellProps(),n=e.propId,t=e.propText,i=!0,l=!1,o=void 0;try{for(var d,r=this.tableDataOrigin[Symbol.iterator]();!(i=(d=r.next()).done);i=!0){var a=d.value;if(a._hiddenRowId===this.editingCellInfo.rowId){var s=this.getEditingRow();this.$set(s,n,a[n]),this.$set(s,t,a[t])}}}catch(c){l=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}this.$refs[this.buildCellRef(this.editingCellInfo.rowId,this.editingCellInfo.columnId)][0].focus()},switchEditColumnHandler:function(e){var n=this;if(this.editingCellInfo.rowId&&this.editingCellInfo.columnId&&this.editingCellInfo.columnKey)for(var t=0;t<this.tableColumnProperties.length;t++)if(this.tableColumnProperties[t].columnId===this.editingCellInfo.columnId){var i=t;if(e>0?i++:e<0&&i--,e>0&&i<this.tableColumnProperties.length||e<0&&i>=0)this.tableColumnProperties[i]&&(this.editCellBlurHandler(),this.editingCellInfo.columnId=this.tableColumnProperties[i].columnId,this.editingCellInfo.columnKey=this.tableColumnProperties[i].columnKey,this.$nextTick((function(){var t=n.$refs[n.buildCellRef(n.editingCellInfo.rowId,n.editingCellInfo.columnId)];t&&t.length>0||n.switchEditColumnHandler(e)})));else{for(var l=0;l<this.tableData.length;l++)if(this.tableData[l]._hiddenRowId===this.editingCellInfo.rowId)break;if(e>0){l>=this.tableData.length-1&&this.addNewRowHandler();var o=this.tableData[++l];this.editingCellInfo.rowId=o._hiddenRowId,this.editingCellInfo.columnId=this.tableColumnProperties[0].columnId,this.editingCellInfo.columnKey=this.tableColumnProperties[0].columnKey}else if(e<0&&l>0){var d=this.tableData[--l];this.editingCellInfo.rowId=d._hiddenRowId,this.editingCellInfo.columnId=this.tableColumnProperties.slice(-1)[0].columnId,this.editingCellInfo.columnKey=this.tableColumnProperties.slice(-1)[0].columnKey}}this.editingCellFocusAndSelect();break}},setEditKeyListener:function(e){if(e)window.addEventListener("keydown",this.editCellKeyDownHandler,!0);else try{window.removeEventListener("keydown",this.editCellKeyDownHandler,!0)}catch(n){}},editCellKeyDownHandler:function(e){var n=!1;if("Tab"!==e.key&&9!==e.keyCode||e.shiftKey||(n=!0,this.switchEditColumnHandler(1)),"Tab"!==e.key&&9!==e.keyCode||!e.shiftKey||(n=!0,this.switchEditColumnHandler(-1)),"Escape"!==e.key&&27!==e.keyCode||(n=!0,this.finishEdit()),"Backspace"!==e.key&&8!==e.keyCode||!e.shiftKey||(n=!0,this.revokeEditingValueHandler()),n){if(e.defaultPrevented)return;e.preventDefault?e.preventDefault():e.returnValue=!1}},checkEditingValueIsNaN:function(){var e=this.getEditingRow(),n=this.getEditingCellProps().propId,t=e[n];if(t&&""!==t){var i=isNaN(t);return this.showValueCheckMsg=i,i}},checkEditingValueIsChanged:function(){var e=this.getEditingCellProps(),n=Object(s["a"])(new Set(Object.values(e))),t=!0,i=!1,l=void 0;try{for(var o,d=n[Symbol.iterator]();!(t=(o=d.next()).done);t=!0){var r=o.value,a=r,c=this.getEditingRowOrigin();if(!c)return!0;var p=this.getEditingRow();if(!p)return!0;if(String(c[a])!==String(p[a]))return!0}}catch(u){i=!0,l=u}finally{try{t||null==d.return||d.return()}finally{if(i)throw l}}return!1},getEditingCellProps:function(){var e=!0,n=!1,t=void 0;try{for(var i,l=this.columnOption[Symbol.iterator]();!(e=(i=l.next()).done);e=!0){var o=i.value;if(o.columnKey===this.editingCellInfo.columnKey)return o}}catch(d){n=!0,t=d}finally{try{e||null==l.return||l.return()}finally{if(n)throw t}}return{}},getEditingRow:function(){var e=!0,n=!1,t=void 0;try{for(var i,l=this.tableData[Symbol.iterator]();!(e=(i=l.next()).done);e=!0){var o=i.value;if(o._hiddenRowId===this.editingCellInfo.rowId)return o}}catch(d){n=!0,t=d}finally{try{e||null==l.return||l.return()}finally{if(n)throw t}}return{}},getEditingRowOrigin:function(){var e=!0,n=!1,t=void 0;try{for(var i,l=this.tableDataOrigin[Symbol.iterator]();!(e=(i=l.next()).done);e=!0){var o=i.value;if(o._hiddenRowId===this.editingCellInfo.rowId)return o}}catch(d){n=!0,t=d}finally{try{e||null==l.return||l.return()}finally{if(n)throw t}}return{}},setEditingCellInfo:function(e,n){var t=this.editingCellInfo.rowId,i=this.editingCellInfo.columnId,l=(this.editingCellInfo.columnKey,this.getEditingCellProps().propId);e[t]||(e[t]={}),n?e[t][i]=l:(delete e[t][i],0===Object.keys(e[t]).length&&delete e[t])},addNewRowHandler:function(){this.tableData.push({_hiddenRowId:this.buildNewRowHiddenId()})},deleteRowHandler:function(e){if(e._hiddenRowId.startsWith("A"))for(var n=0;n<this.tableData.length;n++)this.tableData[n]._hiddenRowId===e._hiddenRowId&&this.tableData.splice(n,1);else e._hiddenRowId.startsWith("D")?(this.changedCellInfo[e._hiddenRowId]&&(this.changedCellInfo[e._hiddenRowId.substring(1)]=JSON.parse(JSON.stringify(this.changedCellInfo[e._hiddenRowId])),delete this.changedCellInfo[e._hiddenRowId]),e._hiddenRowId=e._hiddenRowId.substring(1)):(this.changedCellInfo[e._hiddenRowId]&&(this.changedCellInfo["D"+e._hiddenRowId]=JSON.parse(JSON.stringify(this.changedCellInfo[e._hiddenRowId])),delete this.changedCellInfo[e._hiddenRowId]),e._hiddenRowId="D"+e._hiddenRowId)},submitHandler:function(){var e=this;this.finishEdit();var n={update:[],add:[],delete:[]};for(var t in this.tableData.forEach((function(e){if(e&&e._hiddenRowId&&e._hiddenRowId.length>0){var t=JSON.parse(JSON.stringify(e));switch(e._hiddenRowId.substr(0,1)){case"A":delete t._hiddenRowId,n.update.push(t);break;case"D":void 0!==t.id&&n.delete.push(t.id);break}}})),this.changedCellInfo){var i={};for(var l in this.changedCellInfo[t]["id"]="id",this.changedCellInfo[t])if(this.changedCellInfo[t].hasOwnProperty(l)){var o=this.changedCellInfo[t][l],d=!0,r=!1,a=void 0;try{for(var s,c=this.tableData[Symbol.iterator]();!(d=(s=c.next()).done);d=!0){var p=s.value;p._hiddenRowId===t&&(i[o]=p[o])}}catch(m){r=!0,a=m}finally{try{d||null==c.return||c.return()}finally{if(r)throw a}}}n.update.push(i)}if(console.log("提交了信息",n),this.$notify({title:"查看控制台",type:"success"}),!this.lastTableId){var u=!0,h=!1,f=void 0;try{for(var A,g=this.tableData[Symbol.iterator]();!(u=(A=g.next()).done);u=!0){var w=A.value;w.id&&(this.lastTableId?this.lastTableId=Math.max(this.lastTableId,w.id):this.lastTableId=w.id)}}catch(m){h=!0,f=m}finally{try{u||null==g.return||g.return()}finally{if(h)throw f}}}this.tableData=this.tableData.filter((function(e){return-1===n.delete.indexOf(e.id)})),this.tableData.forEach((function(n){n.id||(n.id=e.lastTableId++)})),this.requestTableData(),this.resetCell()},resetCell:function(){this.changedCellInfo={},this.wrongCellInfo={}},requestTableData:function(){0===this.tableData.length&&(this.tableData=[{id:1,date:"2016-05-02",name:"王",address:"地址",age:11,height:11,selectValue:1,selectName:"1黄金糕"},{id:2,date:"2016-05-04",name:"王小",address:"住的地方",age:11,height:11,selectValue:2,selectName:"2双皮奶"},{id:3,date:"2016-05-01",name:"王小虎",address:"地球村",age:11,height:11,selectValue:3,selectName:"3蚵仔煎"},{id:4,date:"2016-05-03",name:"王虎",address:"啊啊士大夫撒打发斯蒂芬",age:11,height:11,selectValue:4,selectName:"4龙须面"}]),this.initTableDataAndTableDataOrigin()}},deactivated:function(){this.setEditKeyListener(!1)},destroyed:function(){this.setEditKeyListener(!1)}}),p=c,u=(t("7207"),t("2877")),h=Object(u["a"])(p,r,a,!1,null,"0afc7d6a",null),f=h.exports,A={name:"App",components:{TableCellEdit:f},data:function(){return{}}},g=A,w=Object(u["a"])(g,o,d,!1,null,null,null),m=w.exports,I=t("5f72"),b=t.n(I);l.a.config.productionTip=!1,l.a.use(b.a),new l.a({el:"#app",components:{App:m},template:"<App/>"})},"5f72":function(e,n){e.exports=ELEMENT},7207:function(e,n,t){"use strict";var i=t("2ece"),l=t.n(i);l.a},"8bbf":function(e,n){e.exports=Vue},eecd:function(e,n){e.exports="data:image/png;base64,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"},fdc8:function(e,n,t){n=e.exports=t("24fb")(!0);var i=t("1de5"),l=t("eecd"),o=t("06d4"),d=t("549a"),r=i(l),a=i(o),s=i(d);n.push([e.i,"*[data-v-0afc7d6a],div[data-v-0afc7d6a],span[data-v-0afc7d6a],td[data-v-0afc7d6a]{font-size:14px}.el-table[data-v-0afc7d6a] td{padding:0;line-height:30px;height:30px}.el-table[data-v-0afc7d6a] .cell{-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:normal;word-break:break-all;line-height:30px;padding:0 0 0 10px}[data-v-0afc7d6a] .el-input__inner{padding:0;font-size:14px;box-sizing:border-box}.el-button--mini[data-v-0afc7d6a],.el-button--mini.is-round[data-v-0afc7d6a]{padding:5px 5px}.el-input-number.is-without-controls[data-v-0afc7d6a] .el-input__inner{padding:0}[data-v-0afc7d6a] .el-input__inner{height:30px}.el-input-number[data-v-0afc7d6a] .el-input__inner{text-align:left}.el-input-number[data-v-0afc7d6a]{width:100%;line-height:30px}.el-date-editor.el-input[data-v-0afc7d6a],.el-date-editor.el-input__inner[data-v-0afc7d6a]{width:100%}[data-v-0afc7d6a] .el-input__suffix{display:none}[data-v-0afc7d6a] .wrong-cell-info{font-weight:700;color:#f56c6c}[data-v-0afc7d6a] .pre-add-row /deep/ td{background-image:url("+r+")!important;background-position:0 0;background-size:8px;background-repeat:no-repeat}.el-table[data-v-0afc7d6a] .pre-delete-row /deep/ td{background-image:url("+a+")!important;background-position:0 0;background-size:8px;background-repeat:no-repeat}.el-table[data-v-0afc7d6a] .pre-update-cell{background-image:url("+s+");background-position:0 0;background-size:8px;background-repeat:no-repeat}.el-table[data-v-0afc7d6a] th{border-bottom-color:#dfdfdf;background-color:#f6f6f6}.el-table[data-v-0afc7d6a] th:hover{background-color:#fff}\n\n/*!*表格数据行边框*!*/\n\n/*!*表格数据行偶数行-白背景-变色底边*!*/\n\n/*!*表格数据行偶数行-变色背景-白色底边*!*/","",{version:3,sources:["H:/WORKWORK_TEST/elementui-table-cell-edit/src/src/TableCellEdit.vue"],names:[],mappings:"AAksBA,kFACA,cACA,CAGA,8BACA,SAAA,CACA,gBAAA,CACA,WACA,CAGA,iCACA,6BAAA,CACA,qBAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,oBAAA,CACA,gBAAA,CACA,kBACA,CAQA,mCACA,SAAA,CACA,cAAA,CACA,qBAEA,CAGA,6EACA,eACA,CAGA,uEACA,SACA,CAEA,mCACA,WACA,CAEA,mDACA,eACA,CAEA,kCACA,UAAA,CACA,gBACA,CAGA,2FACA,UACA,CAGA,oCACA,YACA,CAEA,mCACA,eAAA,CACA,aACA,CAOA,yCAEA,6DAAA,CACA,uBAAA,CACA,mBAAA,CACA,2BACA,CAEA,qDAEA,6DAAA,CACA,uBAAA,CACA,mBAAA,CACA,2BACA,CAEA,4CAEA,mDAAA,CACA,uBAAA,CACA,mBAAA,CACA,2BACA,CAIA,8BACA,2BAAA,CACA,wBACA,CAEA,oCACA,qBACA;;AAEA,cAAA;;AAKA,wBAAA;;AAMA,yBAAA",file:"TableCellEdit.vue?vue&type=style&index=0&id=0afc7d6a&scoped=true&lang=css&",sourcesContent:['<template>\n  <div>\n    <div style="padding: 5px">\n      <el-button type="primary" plain size="mini" icon="el-icon-circle-plus" @click="addNewRowHandler">新增</el-button>\n      <el-button type="success" plain size="mini" icon="el-icon-success" @click="submitHandler">提交保存</el-button>\n      <el-popover trigger="hover" placement="bottom">\n        <div style="height: 25px">\n          <span style="display: inline-block;font-weight: bold;width: 70px">角标颜色</span>\n          <el-tag style="font-size: 12px;margin-right: 5px" size="mini">预增加</el-tag>\n          <el-tag style="font-size: 12px;margin-right: 5px" size="mini" type="warning">预修改</el-tag>\n          <el-tag style="font-size: 12px;margin-right: 5px" size="mini" type="danger">预删除</el-tag>\n        </div>\n        <div style="height: 25px">\n          <span style="font-weight: bold;color:#666">快捷键（编辑单元格时）：</span>\n        </div>\n        <div style="margin-left: 5px">\n          <div style="height: 25px">\n            <span style="display: inline-block;font-weight: bold;width: 80px">下一单元格</span>\n            <el-tag style="font-size: 12px;margin:0 5px" size="mini">Tab</el-tag>\n          </div>\n          <div style="height: 25px">\n            <span style="display: inline-block;font-weight: bold;width: 80px">上一单元格</span>\n            <el-tag style="font-size: 12px;margin:0 5px" size="mini">Shift</el-tag>\n            <span>+</span>\n            <el-tag style="font-size: 12px;margin:0 5px" size="mini">Tab</el-tag>\n          </div>\n          <div style="height: 25px">\n            <span style="display: inline-block;font-weight: bold;width: 80px">撤销修改</span>\n            <el-tag style="font-size: 12px;margin:0 5px" size="mini">Shift</el-tag>\n            <span>+</span>\n            <el-tag style="font-size: 12px;margin:0 5px" size="mini">Backspace</el-tag>\n          </div>\n          <div style="height: 25px">\n            <span style="display: inline-block;font-weight: bold;width: 80px">完成编辑</span>\n            <el-tag style="font-size: 12px;margin:0 5px" size="mini">Esc</el-tag>\n          </div>\n        </div>\n        <el-button slot="reference" type="warning" plain size="mini" style="float: right;"><i class="el-icon-question"/>使用帮助</el-button>\n      </el-popover>\n    </div>\n    <el-table\n      ref="Table"\n      border\n      :data="tableData.filter(data => !search || data.name.toLowerCase().includes(search.toLowerCase()))"\n      style="width: 100%"\n      :height="500"\n      @cell-click="cellClickHandler"\n      :row-class-name="tableRowClassName"\n      :cell-class-name="tableCellClassName"\n    >\n      <el-table-column label="日期" prop="date"/>\n      <el-table-column v-for="item in columnOption" :column-key="item.columnKey" :label="item.label" :key="item.prop" :prop="item.propText">\n        <template slot="header" slot-scope="scope">\n          <div style="float: left;width: 60px">{{scope.column.label}}</div>\n          \x3c!--        <div style="overflow: hidden">--\x3e\n          \x3c!--          <el-input v-model="search" size="medium" placeholder="关键字过滤"/>--\x3e\n          \x3c!--        </div>--\x3e\n        </template>\n        <template slot-scope="scope">\n          \x3c!--style="background:url(\'main/img/grid/dirty.png\') 0 0 no-repeat;"原打算用角落红标标识修改的单元单元格，但不能放置单元格左上角，暂不使用--\x3e\n          <div v-show="!(isEditingCell(scope)&&item.editType)">{{scope.row[item.propText]}}</div>\n          <div style="display: table" v-if="isEditingCell(scope)&&item.editType">\n            <div style="display: table-cell;width: 100%">\n              <el-input v-if="item.editType===\'Input\'"\n                        @blur="editCellBlurHandler"\n                        :ref="buildCellRef(scope.row._hiddenRowId,scope.column.id)"\n                        v-model="scope.row[item.propId]"/>\n              <el-tooltip v-model="showValueCheckMsg" placement="top" manual content="此值需要为数字" effect="dark">\n                <el-input v-if="item.editType===\'InputNumber\'"\n                          @blur="editCellBlurHandler"\n                          @focus="checkEditingValueIsNaN"\n                          @input="checkEditingValueIsNaN"\n                          :ref="buildCellRef(scope.row._hiddenRowId,scope.column.id)"\n                          v-model="scope.row[item.propId]"\n                          placeholder="输入数字" :min="0" :max="100000000" :controls="false"/>\n              </el-tooltip>\n              <el-date-picker v-if="item.editType===\'DatePicker\'"\n                              @blur="editCellBlurHandler"\n                              :ref="buildCellRef(scope.row._hiddenRowId,scope.column.id)"\n                              v-model="scope.row[item.propId]"\n                              :clearable="false" size="mini" prefix-icon=" " placeholder="选择日期" format="yyyy-MM-dd" value-format="yyyy-MM-dd"/>\n\n              <el-select v-if="item.editType===\'Select\'"\n                         filterable\n                         @blur="editCellBlurHandler"\n                         @change="editCellBlurHandler"\n                         :ref="buildCellRef(scope.row._hiddenRowId,scope.column.id)"\n                         v-model="scope.row[item.propId]"\n                         :automatic-dropdown="true"\n                         placeholder="请选择">\n                <el-option v-for="selectItem in item.selectList" :key="selectItem.value" :label="selectItem.label" :value="selectItem.value"/>\n              </el-select>\n            </div>\n            <div style="margin: 0 0 0 3px;" :style="{width: 52/(scope.row._hiddenRowId.startsWith(\'A\')?2:1)+\'px\'}">\n              <el-popconfirm @onConfirm="revokeEditingValueHandler" title="确定撤销更改？">\n                <el-button v-if="!scope.row._hiddenRowId.startsWith(\'A\')" slot="reference" style="margin: 0;" title="撤销更改(Shift+Backspace)" type="danger" plain size="mini" icon="el-icon-refresh-left"/>\n              </el-popconfirm>\n              <el-button style="margin: 0;" title="完成编辑(Esc)" type="success" plain size="mini" icon="el-icon-check" @click="finishEdit"/>\n              \x3c!--@mousedown.native="onRevokeButtonMouseDown($event,scope)"用于Button可防止编辑单元格失去焦点，但在弹出式组件的按钮中无效--\x3e\n            </div>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column width="100px" label="选择-id" prop="selectValue"/>\n      <el-table-column width="100px" label="选择-text" prop="selectName"/>\n      <el-table-column width="100px" fixed="right" align="center" label="操作">\n        <template slot-scope="scope">\n          <el-button style="font-size: 12px" :type="scope.row._hiddenRowId.startsWith(\'D\')?\'success\':\'danger\'" plain size="mini" :icon="scope.row._hiddenRowId.startsWith(\'D\')?\'el-icon-refresh-left\':\'el-icon-delete\'" @click="deleteRowHandler(scope.row)">\n            {{scope.row._hiddenRowId.startsWith(\'D\')?\'取消\':\'删除\'}}\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\n\n  export default {\n    name: \'TableCellEdit\',\n    data() {\n      return {\n        hiddenRowIdProp: \'_hiddenRowId\',\n        search: \'\',\n        tableData: [],//table当前数据\n        tableDataOrigin: [],//table原数据，做撤销时使用\n        editingCellInfo: {//记录当前编辑中的单元格坐标信息\n          rowId: undefined,\n          columnId: undefined,\n          columnKey: undefined\n        },\n        // 已修改的单元格集合\n        changedCellInfo: {\n          // \'rowId\': {\n          //   \'columnId1\': \'propId\',\n          //   \'columnId2\': \'propId\',\n          // }\n        },\n        // 错误值单元格集合，结构同上\n        wrongCellInfo: {},\n        tableColumnProperties: [],//table中各个列信息。配合Tab键切换单元格使用\n        showValueCheckMsg: false,\n        columnOption: [\n          {\n            columnKey: \'name\',\n            label: \'名称\',\n            propId: \'name\',\n            propText: \'name\',\n            editType: \'Input\',\n          }, {\n            columnKey: \'address\',\n            label: \'住址\',\n            propId: \'address\',\n            propText: \'address\',\n            editType: \'Input\',\n          }, {\n            columnKey: \'date\',\n            label: \'时间编辑\',\n            propId: \'date\',\n            propText: \'date\',\n            editType: \'DatePicker\',\n          }, {\n            columnKey: \'age\',\n            label: \'年龄\',\n            propId: \'age\',\n            propText: \'age\',\n            editType: \'InputNumber\',\n          }, {\n            columnKey: \'height\',\n            label: \'身高\',\n            propId: \'height\',\n            propText: \'height\',\n          }, {\n            columnKey: \'selectCell\',\n            label: \'选择\',\n            propId: \'selectValue\',\n            propText: \'selectName\',\n            editType: \'Select\',\n            selectList: [\n              {\n                value: 1,\n                label: \'1黄金糕\'\n              }, {\n                value: 2,\n                label: \'2双皮奶\'\n              }, {\n                value: 3,\n                label: \'3蚵仔煎\'\n              }, {\n                value: 4,\n                label: \'4龙须面\'\n              }, {\n                value: 5,\n                label: \'5北京烤鸭\'\n              }],\n          },],\n        newRowHiddenId: 1,\n      };\n    },\n    created() {\n      this.initCanEditColumns();\n      this.requestTableData();\n    },\n\n    methods: {\n      tableRowClassName({ row, rowIndex }) {\n        if (row._hiddenRowId.startsWith(\'A\')) {\n          return \'pre-add-row\';\n        }\n        if (row._hiddenRowId.startsWith(\'D\')) {\n          return \'pre-delete-row\';\n        }\n        return \'\';\n      },\n      tableCellClassName({ row, column, rowIndex, columnIndex }) {\n        let classNames = \'\';\n        if (this.changedCellInfo[row._hiddenRowId] && this.changedCellInfo[row._hiddenRowId][column.id]) {\n          classNames += \' pre-update-cell\';        //被修改的角标样式\n        }\n        if (this.wrongCellInfo[row._hiddenRowId] && this.wrongCellInfo[row._hiddenRowId][column.id]) {\n          classNames += \' wrong-cell-info\';        //内容错误的文字样式\n        }\n        return classNames;\n      },\n      //数字变字符串左侧补充0，总长度为n\n      pad(num, n) {\n        let tbl = [];\n        let len = n - num.toString().length;\n        if (len <= 0) return num;\n        if (!tbl[len]) tbl[len] = (new Array(len + 1)).join(\'0\');\n        return tbl[len] + num;\n      },\n      buildNewRowHiddenId() {\n        let newRowHiddenId = \'A\' + this.pad(this.newRowHiddenId, 16);\n        this.newRowHiddenId++;\n        return newRowHiddenId;\n      },\n      //table原数据加自定义id列，留存副本 [实际需在获取数据后马上调用]\n      initTableDataAndTableDataOrigin() {\n        let i = 1;\n        for (let row of this.tableData) {\n          //_hiddenRowId为定位行的辅助参数，请求的数据中不能包含此字段\n          row._hiddenRowId = this.pad(i, 16);\n          i++;\n        }\n        this.tableDataOrigin = JSON.parse(JSON.stringify(this.tableData));\n      },\n\n      //从实际渲染的组件中，获取各列信息，收集其中包含columnKey的列，为可编辑列信息集合\n      initCanEditColumns() {\n        this.tableColumnProperties = [];\n        this.$nextTick(() => {\n          for (let item of this.$refs.Table.columns) {\n            if (item.columnKey) {\n              this.tableColumnProperties.push(\n                {\n                  columnId: item.id,\n                  columnKey: item.columnKey\n                }\n              );\n            }\n          }\n        });\n      },\n      //通过行列坐标构建ref的方法\n      buildCellRef(_hiddenRowId, columnId) {\n        return \'Cell_\' + _hiddenRowId + \'_\' + columnId;\n      },\n      //单元格编辑状态 开关\n      isEditingCell(scope) {\n        return this.editingCellInfo.rowId === scope.row._hiddenRowId\n          && this.editingCellInfo.columnId === scope.column.id\n          && this.editingCellInfo.columnKey === scope.column.columnKey;\n      },\n      cellClickHandler(row, column, cell, event) {\n        this.startEdit(row, column);\n      },\n      //开始编辑(设置编辑中单元格信息)\n      startEdit(row, column) {\n        this.setEditKeyListener(false);\n        this.setEditKeyListener(true);\n        this.editingCellInfo.rowId = row._hiddenRowId;\n        this.editingCellInfo.columnId = column.id;\n        this.editingCellInfo.columnKey = column.columnKey;\n        this.editingCellFocusAndSelect();\n        // console.log(\'开始编辑\', column.columnKey);\n      },\n      //完成编辑（清除单元格编辑状态，清除按键监听事件）\n      finishEdit() {\n        this.editingCellInfo = {\n          rowId: undefined,\n          columnId: undefined,\n          columnKey: undefined,\n        };\n        this.setEditKeyListener(false);\n      },\n      //编辑中单元格 行文字选中，焦点获取\n      editingCellFocusAndSelect() {\n        let _hiddenRowId = this.editingCellInfo.rowId;\n        let columnId = this.editingCellInfo.columnId;\n        this.$nextTick(() => {\n          //以单元格row._hiddenRowId，column.id，发现单元格。\n          let cellEditorELArray = this.$refs[this.buildCellRef(_hiddenRowId, columnId)];\n          if (cellEditorELArray && cellEditorELArray.length > 0) {\n            if (cellEditorELArray[0].select) {\n              cellEditorELArray[0].select();\n            } else if (cellEditorELArray[0].focus) {\n              cellEditorELArray[0].focus();\n            }\n          }\n        });\n      },\n      //编辑中单元格失去焦点事件\n      editCellBlurHandler() {\n        this.$nextTick(() => {//消除错误值提示\n          this.showValueCheckMsg = false;\n        });\n        let props = this.getEditingCellProps();\n        switch (props.editType) {\n          case \'InputNumber\':\n            //检查值是否正确\n            let isWrongCell = this.checkEditingValueIsNaN();\n            this.setEditingCellInfo(this.wrongCellInfo, isWrongCell);\n            break;\n          case \'Select\':\n            let row = this.getEditingRow();\n            let selectList = props.selectList;\n            let newText = null;\n            for (let selectItem of selectList) {\n              if (selectItem.value === row[props.propId]) {\n                newText = selectItem.label;\n              }\n            }\n            this.$set(row, props.propId, row[props.propId]);\n            this.$set(row, props.propText, newText);\n            break;\n        }\n        this.setEditingCellInfo(this.changedCellInfo, this.checkEditingValueIsChanged());\n      },\n      //将编辑中单元格 还原到未修改时的值\n      revokeEditingValueHandler() {\n        let props = this.getEditingCellProps();\n        let propId = props.propId;\n        let propText = props.propText;\n        for (let rowOrigin of this.tableDataOrigin) {\n          if (rowOrigin._hiddenRowId === this.editingCellInfo.rowId) {\n            let row = this.getEditingRow();\n            this.$set(row, propId, rowOrigin[propId]);\n            this.$set(row, propText, rowOrigin[propText]);\n          }\n        }\n        this.$refs[this.buildCellRef(this.editingCellInfo.rowId, this.editingCellInfo.columnId)][0].focus();\n\n      },\n      //阻止默认事件。（如阻止点击按钮时，input失去焦点）\n      // preventNativeEvent(event) {\n      //   if (event && event.preventDefault) { //现代浏览器阻止默认事件\n      //     event.preventDefault();\n      //   } else {//IE阻止默认事件\n      //     window.event.returnValue = false;\n      //   }\n      //   return false;\n      // },\n      //切换正在编辑的单元格\n      switchEditColumnHandler(direction) {\n        // console.log(\'Tab切换单元格\', this.editingCellInfo.rowId, this.editingCellInfo.columnId, this.editingCellInfo.columnKey);\n        if (this.editingCellInfo.rowId && this.editingCellInfo.columnId && this.editingCellInfo.columnKey) {\n          for (let i = 0; i < this.tableColumnProperties.length; i++) {\n            if (this.tableColumnProperties[i].columnId === this.editingCellInfo.columnId) {\n              let next = i;\n              if (direction > 0) {\n                next++;\n              } else if (direction < 0) {\n                next--;\n              }\n              if (direction > 0 && next < this.tableColumnProperties.length || direction < 0 && next >= 0) {\n                if (this.tableColumnProperties[next]) {\n                  this.editCellBlurHandler();\n                  this.editingCellInfo.columnId = this.tableColumnProperties[next].columnId;\n                  this.editingCellInfo.columnKey = this.tableColumnProperties[next].columnKey;\n\n                  this.$nextTick(() => {\n                    let cellEditorELArray = this.$refs[this.buildCellRef(this.editingCellInfo.rowId, this.editingCellInfo.columnId)];\n                    if (cellEditorELArray && cellEditorELArray.length > 0) {\n                      //可以检测到input框，不做任何操作\n                    } else {\n                      this.switchEditColumnHandler(direction);\n                    }\n                  });\n                }\n              } else {\n                //跳行\n                let rowIndex = 0;\n                for (; rowIndex < this.tableData.length; rowIndex++) {\n                  if (this.tableData[rowIndex]._hiddenRowId === this.editingCellInfo.rowId) {\n                    break;\n                  }\n                }\n                if (direction > 0) {\n                  if (rowIndex >= this.tableData.length - 1) {\n                    this.addNewRowHandler();//超过最后一行时增加新行\n                  }\n                  let nextRow = this.tableData[++rowIndex];\n                  this.editingCellInfo.rowId = nextRow._hiddenRowId;\n                  this.editingCellInfo.columnId = this.tableColumnProperties[0].columnId;\n                  this.editingCellInfo.columnKey = this.tableColumnProperties[0].columnKey;\n                } else if (direction < 0) {\n                  if (rowIndex > 0) {\n                    let preRow = this.tableData[--rowIndex];\n                    this.editingCellInfo.rowId = preRow._hiddenRowId;\n                    this.editingCellInfo.columnId = this.tableColumnProperties.slice(-1)[0].columnId;\n                    this.editingCellInfo.columnKey = this.tableColumnProperties.slice(-1)[0].columnKey;\n                  } else {\n                  }\n                }\n              }\n              this.editingCellFocusAndSelect();\n              break;\n            }\n          }\n        }\n      },\n      //添加/删除键盘监听事件\n      setEditKeyListener(isAdd) {\n        if (isAdd) {\n          window.addEventListener(\'keydown\', this.editCellKeyDownHandler, true);\n        } else {\n          try {\n            window.removeEventListener(\'keydown\', this.editCellKeyDownHandler, true);\n          } catch (e) {\n          }\n        }\n      },\n      //键盘事件\n      editCellKeyDownHandler(event) {\n        // console.log(\'按键值\', event.key, event.keyCode);\n        let needPreventDefault = false;\n        //Tab切换单元格\n        if ((event.key === \'Tab\' || event.keyCode === 9) && !event.shiftKey) {\n          needPreventDefault = true;\n          this.switchEditColumnHandler(1);\n        }\n        //Shift+Tab切换单元格\n        if ((event.key === \'Tab\' || event.keyCode === 9) && event.shiftKey) {\n          needPreventDefault = true;\n          this.switchEditColumnHandler(-1);\n        }\n        //Esc完成编辑\n        if ((event.key === \'Escape\' || event.keyCode === 27)) {\n          needPreventDefault = true;\n          this.finishEdit();\n        }\n        //Shift+Backspace撤销\n        if ((event.key === \'Backspace\' || event.keyCode === 8) && event.shiftKey) {\n          needPreventDefault = true;\n          this.revokeEditingValueHandler();\n        }\n        if (needPreventDefault) {\n          if (event.defaultPrevented) {\n            return;\n          }\n          if (event.preventDefault) {\n            event.preventDefault();\n          } else {\n            event.returnValue = false;\n          }\n        }\n      },\n      //检查编辑中单元格 数据是否为数字。 不是数字 返回true\n      checkEditingValueIsNaN() {\n        let row = this.getEditingRow();\n        let propId = this.getEditingCellProps().propId;\n        let newValue = row[propId];\n        if (newValue && newValue !== \'\') {\n          let result = isNaN(newValue);\n          this.showValueCheckMsg = result;\n          return result;\n        }\n      },\n      //检查编辑中单元格 新值与原值是否相同\n      checkEditingValueIsChanged() {\n        let props = this.getEditingCellProps();\n        let values = [...new Set(Object.values(props))];\n        for (let value of values) {\n          let prop = value;\n          let rowOrigin = this.getEditingRowOrigin();\n          if (!rowOrigin) {\n            return true;\n          }\n          let row = this.getEditingRow();\n          if (!row) {\n            return true;\n          }\n          if (String(rowOrigin[prop]) !== String(row[prop])) {\n            return true;\n          }\n        }\n        return false;\n      },\n      //获取编辑中单元格 设置参数\n      getEditingCellProps() {\n        for (let item of this.columnOption) {\n          if (item.columnKey === this.editingCellInfo.columnKey) {\n            return item;\n          }\n        }\n        return {};\n      },\n      //获取编辑中行 现数据\n      getEditingRow() {\n        for (let row of this.tableData) {\n          if (row._hiddenRowId === this.editingCellInfo.rowId) {\n            return row;\n          }\n        }\n        return {};\n      },\n      //获取编辑中行 原数据\n      getEditingRowOrigin() {\n        for (let row of this.tableDataOrigin) {\n          if (row._hiddenRowId === this.editingCellInfo.rowId) {\n            return row;\n          }\n        }\n        return {};\n      },\n      //操作记录 被修改、值有误 等单元格集合\n      setEditingCellInfo(cellArray, isAdd) {\n        let rowId = this.editingCellInfo.rowId;\n        let columnId = this.editingCellInfo.columnId;\n        let columnKey = this.editingCellInfo.columnKey;\n        let propId = this.getEditingCellProps().propId;\n        if (!cellArray[rowId]) {\n          cellArray[rowId] = {};\n        }\n        if (isAdd) {\n          cellArray[rowId][columnId] = propId;\n        } else {\n          delete cellArray[rowId][columnId];\n          if (Object.keys(cellArray[rowId]).length === 0) {\n            delete cellArray[rowId];\n          }\n        }\n      },\n      addNewRowHandler() {\n        this.tableData.push(\n          {\n            _hiddenRowId: this.buildNewRowHiddenId(),\n          }\n        );\n      },\n      deleteRowHandler(row) {\n        if (row._hiddenRowId.startsWith(\'A\')) {\n          for (let rowIndex = 0; rowIndex < this.tableData.length; rowIndex++) {\n            if (this.tableData[rowIndex]._hiddenRowId === row._hiddenRowId) {\n              this.tableData.splice(rowIndex, 1);\n            }\n          }\n        } else if (row._hiddenRowId.startsWith(\'D\')) {\n          if (this.changedCellInfo[row._hiddenRowId]) {\n            this.changedCellInfo[row._hiddenRowId.substring(1)] = JSON.parse(JSON.stringify(this.changedCellInfo[row._hiddenRowId]));\n            delete this.changedCellInfo[row._hiddenRowId];\n          }\n          row._hiddenRowId = row._hiddenRowId.substring(1);\n        } else {\n          if (this.changedCellInfo[row._hiddenRowId]) {\n            this.changedCellInfo[\'D\' + row._hiddenRowId] = JSON.parse(JSON.stringify(this.changedCellInfo[row._hiddenRowId]));\n            delete this.changedCellInfo[row._hiddenRowId];\n          }\n          row._hiddenRowId = \'D\' + row._hiddenRowId;\n        }\n      },\n      submitHandler() {\n        this.finishEdit();\n        let submitData = {\n          update: [],\n          add: [],\n          delete: [],\n        };\n        this.tableData.forEach(item => {\n          if (item && item._hiddenRowId && item._hiddenRowId.length > 0) {\n            //update\n            let itemTmp = JSON.parse(JSON.stringify(item));\n            switch (item._hiddenRowId.substr(0, 1)) {\n              case \'A\':\n                delete itemTmp._hiddenRowId;\n                submitData.update.push(itemTmp);//收集添加对象集合\n                break;\n              case \'D\':\n                if (itemTmp.id !== undefined) {\n                  submitData.delete.push(itemTmp.id);//收集删除id集合\n                }\n                break;\n            }\n          }\n        });\n        for (let rowId in this.changedCellInfo) {\n          let itemTmp = {};\n          this.changedCellInfo[rowId][\'id\'] = \'id\';//更新的行 附加id字段\n          for (let columnId in this.changedCellInfo[rowId]) {\n\n            if (this.changedCellInfo[rowId].hasOwnProperty(columnId)) {\n              let propId = this.changedCellInfo[rowId][columnId];\n              for (let row of this.tableData) {\n                if (row._hiddenRowId === rowId) {\n                  itemTmp[propId] = row[propId];\n                }\n              }\n            }\n          }\n          submitData.update.push(itemTmp);//收集更新对象集合\n        }\n        console.log(\'提交了信息\', submitData);\n\n        this.$notify({\n          title: \'查看控制台\',\n          type: \'success\'\n        });\n        {//TODO 模拟提交后数据结果，与后台交接后不使用\n          if (!this.lastTableId) {\n            for (let row of this.tableData) {\n              if (row.id) {\n                if (this.lastTableId) {\n                  this.lastTableId = Math.max(this.lastTableId, row.id);\n                } else {\n                  this.lastTableId = row.id;\n                }\n              }\n            }\n          }\n          this.tableData = this.tableData\n            .filter(row => {\n              return submitData.delete.indexOf(row.id) === -1;\n            });\n\n          this.tableData.forEach(row => {\n            if (!row.id) {\n              row.id = (this.lastTableId++);\n            }\n          });\n        }\n\n        this.requestTableData();\n        this.resetCell();\n      },\n      //重置记录单元格标记的对象\n      resetCell() {\n        this.changedCellInfo = {};\n        this.wrongCellInfo = {};\n      },\n      requestTableData() {\n        if (this.tableData.length === 0) {//TODO 模拟获取数据，与后台交接后不使用\n          this.tableData = [{\n            id: 1,\n            date: \'2016-05-02\',\n            name: \'王\',\n            address: \'地址\',\n            age: 11,\n            height: 11,\n            selectValue: 1,\n            selectName: \'1黄金糕\',\n          }, {\n            id: 2,\n            date: \'2016-05-04\',\n            name: \'王小\',\n            address: \'住的地方\',\n            age: 11,\n            height: 11,\n            selectValue: 2,\n            selectName: \'2双皮奶\',\n          }, {\n            id: 3,\n            date: \'2016-05-01\',\n            name: \'王小虎\',\n            address: \'地球村\',\n            age: 11,\n            height: 11,\n            selectValue: 3,\n            selectName: \'3蚵仔煎\',\n          }, {\n            id: 4,\n            date: \'2016-05-03\',\n            name: \'王虎\',\n            address: \'啊啊士大夫撒打发斯蒂芬\',\n            age: 11,\n            height: 11,\n            selectValue: 4,\n            selectName: \'4龙须面\',\n          }];\n        }\n        this.initTableDataAndTableDataOrigin();\n      }\n    },\n\n\n    deactivated() {\n      this.setEditKeyListener(false);\n    },\n    destroyed() {\n      this.setEditKeyListener(false);\n    },\n\n  };\n<\/script>\n\n<style scoped>\n  *, div, span, td {\n    font-size: 14px;\n  }\n\n  /*去除表格的行中，上下padding，统一行高*/\n  .el-table /deep/ td {\n    padding: 0;\n    line-height: 30px;\n    height: 30px;\n  }\n\n  /*调整模板中div与td一样大*/\n  .el-table /deep/ .cell {\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: normal;\n    word-break: break-all;\n    line-height: 30px;\n    padding: 0 0 0 10px;\n  }\n\n\n  /*.el-table /deep/ td div {*/\n  /*  margin: 5px;*/\n  /*}*/\n\n  /*去除input中的padding*/\n  /deep/ .el-input__inner {\n    padding: 0;\n    font-size: 14px;\n    box-sizing: border-box;\n    height: 30px;\n  }\n\n  /*缩小button中的padding*/\n  .el-button--mini, .el-button--mini.is-round {\n    padding: 5px 5px;\n  }\n\n  /*inputNumber样式*/\n  .el-input-number.is-without-controls /deep/ .el-input__inner {\n    padding: 0\n  }\n\n  /deep/ .el-input__inner {\n    height: 30px;\n  }\n\n  .el-input-number /deep/ .el-input__inner {\n    text-align: left;\n  }\n\n  .el-input-number {\n    width: 100%;\n    line-height: 30px;\n  }\n\n  /*dataPicker样式*/\n  .el-date-editor.el-input, .el-date-editor.el-input__inner {\n    width: 100%;\n  }\n\n  /*select样式*/\n  /deep/ .el-input__suffix {\n    display: none;\n  }\n\n  /deep/ .wrong-cell-info {\n    font-weight: bold;\n    color: #F56C6C;\n  }\n\n  /*新行*/\n  /deep/ .pre-add-row {\n    /*stripe会覆盖这个颜色，不再使用stripe*/\n  }\n\n  /deep/ .pre-add-row /deep/ td {\n    /*background-color: red !important;*/\n    background-image: url(\'./static/img/grid/pre_add_corner.png\') !important;\n    background-position: 0 0;\n    background-size: 8px;\n    background-repeat: no-repeat;\n  }\n\n  .el-table /deep/ .pre-delete-row /deep/ td {\n    /*background-color: red !important;*/\n    background-image: url(\'./static/img/grid/pre_delete_corner.png\') !important;\n    background-position: 0 0;\n    background-size: 8px;\n    background-repeat: no-repeat;\n  }\n\n  .el-table /deep/ .pre-update-cell {\n    /*background-color: red !important;*/\n    background-image: url(\'./static/img/grid/pre_update_corner.png\');\n    background-position: 0 0;\n    background-size: 8px;\n    background-repeat: no-repeat;\n  }\n\n\n  /*表格头部*/\n  .el-table /deep/ th {\n    border-bottom-color: #DFDFDF;\n    background-color: #F6F6F6;\n  }\n\n  .el-table /deep/ th:hover {\n    background-color: #FFFFFF;\n  }\n\n  /*!*表格数据行边框*!*/\n  /*.el-table /deep/ td {*/\n  /*  border-color: #FFF;*/\n  /*}*/\n\n  /*!*表格数据行偶数行-白背景-变色底边*!*/\n  /*.el-table /deep/ tr:nth-child(2n) /deep/ td {*/\n  /*  border-right-color: #EFEFFE;*/\n  /*  border-bottom-color: #EFEFFA;*/\n  /*}*/\n\n  /*!*表格数据行偶数行-变色背景-白色底边*!*/\n  /*.el-table /deep/ tr:nth-child(2n+1) /deep/ td {*/\n  /*  background-color: #eaf2ff;*/\n  /*}*/\n\n\n</style>\n']}])}});