!function(e){function n(n){for(var i,d,a=n[0],r=n[1],s=n[2],p=0,u=[];p<a.length;p++)d=a[p],Object.prototype.hasOwnProperty.call(l,d)&&l[d]&&u.push(l[d][0]),l[d]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);for(c&&c(n);u.length;)u.shift()();return o.push.apply(o,s||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],i=!0,a=1;a<t.length;a++){var r=t[a];0!==l[r]&&(i=!1)}i&&(o.splice(n--,1),e=d(d.s=t[0]))}return e}var i={},l={app:0},o=[];function d(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,d),t.l=!0,t.exports}d.m=e,d.c=i,d.d=function(e,n,t){d.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,n){if(1&n&&(e=d(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(d.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)d.d(t,i,function(n){return e[n]}.bind(null,i));return t},d.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(n,"a",n),n},d.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},d.p="";var a=window.webpackJsonp=window.webpackJsonp||[],r=a.push.bind(a);a.push=n,a=a.slice();for(var s=0;s<a.length;s++)n(a[s]);var c=r;o.push([0,"chunk-vendors"]),t()}({0:function(e,n,t){e.exports=t("56d7")},"06d4":function(e,n){e.exports="data:image/png;base64,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"},"130c":function(e,n,t){"use strict";var i=t("b8a2");t.n(i).a},"39ff":function(e,n,t){n=e.exports=t("24fb")(!0);var i=t("1de5"),l=t("eecd"),o=t("06d4"),d=t("549a"),a=i(l),r=i(o),s=i(d);n.push([e.i,"*[data-v-b0c56674],div[data-v-b0c56674],input[data-v-b0c56674],span[data-v-b0c56674],td[data-v-b0c56674]{font-size:14px;font-family:Arial,Microsoft YaHei,serif}.el-table[data-v-b0c56674] td{padding:0;line-height:30px;height:30px}.el-table[data-v-b0c56674] .cell{-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:normal;word-break:break-all;line-height:30px;padding:0 0 0 10px}[data-v-b0c56674] .el-input__inner{padding:0;font-size:14px;box-sizing:border-box;height:30px;line-height:30px}[data-v-b0c56674] .el-input__prefix,[data-v-b0c56674] .el-input__suffix{display:none}.el-button--mini[data-v-b0c56674],.el-button--mini.is-round[data-v-b0c56674]{padding:5px 5px}[data-v-b0c56674] .pre-add-row /deep/ td{background-image:url("+a+")!important}[data-v-b0c56674] .pre-add-row /deep/ td,[data-v-b0c56674] .pre-delete-row /deep/ td{background-position:0 0;background-size:8px;background-repeat:no-repeat}[data-v-b0c56674] .pre-delete-row /deep/ td{background-image:url("+r+")!important}[data-v-b0c56674] .pre-update-cell{background-image:url("+s+");background-position:0 0;background-size:8px;background-repeat:no-repeat}[data-v-b0c56674] input::-webkit-inner-spin-button,[data-v-b0c56674] input::-webkit-outer-spin-button{-webkit-appearance:none}[data-v-b0c56674] input[type=number]{-moz-appearance:textfield}","",{version:3,sources:["P:/elementui-table-cell-edit/src/src/TableCellEdit.vue"],names:[],mappings:"AAktBA,yGACA,cAAA,CACA,uCACA,CAGA,8BACA,SAAA,CACA,gBAAA,CACA,WACA,CAGA,iCACA,6BAAA,CACA,qBAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CACA,oBAAA,CACA,gBAAA,CACA,kBACA,CAGA,mCACA,SAAA,CACA,cAAA,CACA,qBAAA,CACA,WAAA,CACA,gBACA,CAOA,wEACA,YACA,CAGA,6EACA,eACA,CAEA,yCAEA,6DAIA,CAEA,qFALA,uBAAA,CACA,mBAAA,CACA,2BASA,CANA,4CAEA,6DAIA,CAEA,mCAEA,mDAAA,CACA,uBAAA,CACA,mBAAA,CACA,2BACA,CAGA,sGAEA,uBACA,CAEA,qCACA,yBACA",file:"TableCellEdit.vue?vue&type=style&index=0&id=b0c56674&scoped=true&lang=css&",sourcesContent:['<template>\n  <div>\n    <el-form inline style="height:20px;">\n      <el-form-item style="margin-bottom: 0">\n        <el-button class="custom-button-in-toolbar " type="primary" plain size="mini" icon="el-icon-refresh"\n                   @click="refreshData">刷新\n        </el-button>\n      </el-form-item>\n      <el-form-item style="margin-bottom: 0">\n        <el-button type="primary" plain size="mini" icon="el-icon-circle-plus" @click="addNewRowHandler">新增</el-button>\n      </el-form-item>\n      <el-form-item style="margin-bottom: 0">\n        <el-button type="success" plain size="mini" icon="el-icon-success" @click="submitHandler">提交保存</el-button>\n      </el-form-item>\n      <el-form-item style="float:right;margin-bottom: 0">\n        <el-popover trigger="hover" placement="bottom">\n          <el-button slot="reference" type="warning" plain size="mini"><i class="el-icon-question"/>使用帮助</el-button>\n          <div style="height: 25px">\n            <span style="color:#ff7435;display: inline-block;font-weight: bold;">所有操作均在“提交保存”后生效</span>\n          </div>\n          <div style="height: 25px">\n            <span style="display: inline-block;font-weight: bold;width: 70px">角标颜色</span>\n            <el-tag style="font-size: 12px;margin-right: 5px" size="mini">预增加</el-tag>\n            <el-tag style="font-size: 12px;margin-right: 5px" size="mini" type="warning">预修改</el-tag>\n            <el-tag style="font-size: 12px;margin-right: 5px" size="mini" type="danger">预删除</el-tag>\n          </div>\n          <div style="height: 25px">\n            <span style="font-weight: bold;color:#666">快捷键（编辑单元格时）：</span>\n          </div>\n          <div style="margin-left: 5px">\n            <div style="height: 25px">\n              <span style="display: inline-block;font-weight: bold;width: 80px">下一单元格</span>\n              <el-tag style="font-size: 12px;margin:0 5px" size="mini">Tab</el-tag>\n            </div>\n            <div style="height: 25px">\n              <span style="display: inline-block;font-weight: bold;width: 80px">上一单元格</span>\n              <el-tag style="font-size: 12px;margin:0 5px" size="mini">Shift</el-tag>\n              <span>+</span>\n              <el-tag style="font-size: 12px;margin:0 5px" size="mini">Tab</el-tag>\n            </div>\n            <div style="height: 25px">\n              <span style="display: inline-block;font-weight: bold;width: 80px">撤销修改</span>\n              <el-tag style="font-size: 12px;margin:0 5px" size="mini">Shift</el-tag>\n              <span>+</span>\n              <el-tag style="font-size: 12px;margin:0 5px" size="mini">Backspace</el-tag>\n            </div>\n            <div style="height: 25px">\n              <span style="display: inline-block;font-weight: bold;width: 80px">完成编辑</span>\n              <el-tag style="font-size: 12px;margin:0 5px" size="mini">Esc</el-tag>\n            </div>\n          </div>\n        </el-popover>\n      </el-form-item>\n    </el-form>\n    <el-table\n      :data="tableData"\n      ref="Table"\n      border\n      style="width: 100%"\n      height="400px"\n      :row-class-name="tableRowClassName"\n      :cell-class-name="tableCellClassName"\n    >\n      <el-table-column fixed="left" type="index" width="50px" label="序号" align="center"/>\n      <el-table-column v-for="item in columnOption" :min-width="item.minWidth" :width="item.width"\n                       :column-key="item.columnKey" :label="item.label" :key="item.prop" :prop="item.propText">\n        <template slot-scope="scope">\n          <div @click="cellClickHandler(scope.row,item)" style="min-height: 30px" :style="{color:item.color}"\n               v-show="!isEditingCell(scope.row._hiddenRowId,item.columnKey,item.editType)">\n            <span>{{scope.row[item.propText]}}</span>\n          </div>\n          <div style="display: table" v-if="isEditingCell(scope.row._hiddenRowId,item.columnKey,item.editType)">\n            <div style="display: table-cell;width: 100%">\n              <input v-if="item.editType===\'Input\'"\n                     class="el-input el-input__inner"\n                     style="width:100%"\n                     @blur="editCellBlurHandler"\n                     :ref="buildCellRef(scope.row._hiddenRowId,item.columnKey)"\n              />\n              <input v-if="item.editType===\'InputNumber\'"\n                     class="el-input el-input__inner"\n                     style="width:100%"\n                     type="Number"\n                     @blur="editCellBlurHandler"\n                     :ref="buildCellRef(scope.row._hiddenRowId,item.columnKey)"\n                     placeholder="输入数字"/>\n              <el-date-picker v-if="item.editType===\'DatePicker\'"\n                              style="width:100%"\n                              @blur="editCellBlurHandler"\n                              :ref="buildCellRef(scope.row._hiddenRowId,item.columnKey)"\n                              v-model="scope.row[item.propId]"\n                              :clearable="false" size="mini" prefix-icon=" " placeholder="选择日期" format="yyyy-MM-dd"\n                              value-format="yyyy-MM-dd"/>\n              <el-select v-if="item.editType===\'Select\'"\n                         width="100%"\n                         filterable\n                         @blur="editCellBlurHandler"\n                         @change="editCellBlurHandler"\n                         :ref="buildCellRef(scope.row._hiddenRowId,item.columnKey)"\n                         v-model="scope.row[item.propId]"\n                         :automatic-dropdown="true"\n                         placeholder="请选择">\n                <el-option v-for="selectItem in item.selectList" :key="selectItem.value" :label="selectItem.label"\n                           :value="selectItem.value"/>\n              </el-select>\n            </div>\n            <div style="margin: 0;" :style="{width:getRowState(scope.row._hiddenRowId)===\'add\'?0:26+\'px\'}">\n              <el-popconfirm placement="right" @onConfirm="revokeEditingValueHandler" title="确定撤销更改？">\n                <el-button v-if="getRowState(scope.row._hiddenRowId)!==\'add\'" slot="reference" style="margin: 0;"\n                           title="撤销更改(Shift+Backspace)" type="danger" plain size="mini" icon="el-icon-refresh-left"/>\n              </el-popconfirm>\n            </div>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column width="120px" prop="selectValue" align="center" label="选择id(普通列)"/>\n      <el-table-column width="120px" prop="selectName" align="center" label="选择值(普通列)"/>\n      <el-table-column width="60px" fixed="right" align="center" label="操作">\n        <template slot-scope="scope">\n          <el-button :title="getRowState(scope.row._hiddenRowId)===\'delete\'?\'取消删除\':\'删除\'"\n                     style="margin-left: -10px;font-size: 12px"\n                     :type="getRowState(scope.row._hiddenRowId)===\'delete\'?\'success\':\'danger\'" plain size="mini"\n                     :icon="getRowState(scope.row._hiddenRowId)===\'delete\'?\'el-icon-refresh-left\':\'el-icon-delete\'"\n                     @click="deleteRowHandler(scope.row)"/>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\n  import axios from \'axios\'\n\n  export default {\n    name: \'TableCellEdit\',\n    data() {\n      return {\n        tableData: undefined,//table当前数据\n        tableDataOrigin: [],//table原数据，做撤销时使用\n        editingCellInfo: {//记录当前编辑中的单元格坐标信息\n          rowId: undefined,\n          columnId: undefined,\n          columnOption: undefined\n        },\n        changedCellInfo: {// 记录已修改单元格的集合\n          // \'rowId\': {//行标识\n          //   \'columnId1\': \'propId1\',//列标识 ： 列的数据字段\n          //   \'columnId2\': \'propId2\',//列标识 ： 列的数据字段\n          // }\n        },\n        dataPrimaryKey: "id",//数据的主键字段，即区分每行数据的标识字段\n        columnOption: [ //列配置\n          {\n            columnKey: "column1",\n            minWidth: "100px",\n            label: \'文字\',\n            propId: \'text\',\n            propText: \'text\',\n            editType: \'Input\',\n          }, {\n            columnKey: "column2",\n            minWidth: "100px",\n            label: \'文字1\',\n            propId: \'text1\',\n            propText: \'text1\',\n            editType: \'Input\',\n          }, {\n            //以下为单元格编辑关键配置：\n            columnKey: "column3",//列标识，每列互相不重复即可。\n            propId: \'date\',   //编辑时绑定的数据字段（这个字段需要为数据中的字段名，并且也是本列编辑后回传的字段名）\n            propText: \'date\', //非编辑时展示的数据字段（这个字段需要为数据中的字段名）\n            editType: \'DatePicker\',//编辑类型，现有固定的几种Input，InputNumber，Select，DatePicker。没有editType则此列不能进入编辑模式。若有值且不是以上值则编辑出bug\n            //以下为element-ui的table原有的列配置字段引用的值。（只是在el-table-column中引用了值）\n            width: "150px",\n            minWidth: "150px",\n            label: \'时间编辑\',\n          }, {\n            columnKey: "column4",\n            minWidth: "100px",\n            label: \'数字\',\n            propId: \'number\',\n            propText: \'number\',\n            editType: \'InputNumber\',\n          }, {\n            columnKey: "column5",\n            minWidth: "140px",\n            label: \'不能编辑\',\n            propId: \'textNoEdit\',\n            propText: \'textNoEdit\',\n          }, {\n            columnKey: "column6",\n            minWidth: "100px",\n            label: \'选择\',\n            propId: \'selectValue\',\n            propText: \'selectName\',\n            editType: \'Select\',\n            selectList: [//选择列表，需要在此提供列表数据\n              {\n                value: 10,\n                label: \'这个选项会被fetchSelectListData()方法中的值覆盖\'\n              },\n            ],\n          },],\n        //辅助参数，记录当前列表中最后一行的 行标识序号，新增时，新行参照这个序号继续增加\n        newRowHiddenId: 1,\n        //辅助参数，控制tab键一直按住，也不会重复触发切换单元格\n        tabKeyAlreadyDown: false,\n      };\n    },\n    mounted() {\n    },\n    created() {\n      this.preventLeavingPage();\n      this.fetchData();\n      this.fetchSelectListData()\n    },\n\n    methods: {\n      refreshData() {\n        if (JSON.stringify(this.changedCellInfo) !== (\'{}\')) {\n          this.$confirm(\'检测到您有未提交保存的修改<br />刷新将<span style="color:#E6A23C;font-weight: bold">丢失未保存的修改</span>，是否继续？\',\n            {dangerouslyUseHTMLString: true})\n            .then(() => {\n              this.fetchData();\n            })\n            .catch(() => {\n            });\n        } else {\n          this.fetchData();\n        }\n      },\n      fetchData() {// 获取数据\n        axios.post(\'/getTableDataApi\').then(({data}) => {\n          this.setTableData(data.tableData);\n        })\n      },\n      fetchSelectListData() {// 获取下拉列表数据\n        axios.post(\'/getSelectListDataApi\').then(({data}) => {\n          this.columnOption.forEach(e => {\n            if (e.columnKey === \'column6\') {\n              e.selectList = data.selectListData;\n            }\n          })\n        })\n      },\n      submitHandler() {//提交结果\n        let submitData = this.getEditResult();\n        axios.post(\'/setTableDataApi\', submitData).then(({data}) => {\n          if (data.result) {\n            this.fetchData();\n            console.log(\'提交了信息\', submitData);\n            this.$notify({\n              title: \'提交成功，查看控制台\',\n              type: \'success\'\n            });\n          }\n        })\n      },\n      //---------------------------------------------以下为单元格编辑支持方法---------------------------------------------\n      setTableData(tableData) {//设置表格数据\n        this.resetCell();\n        this.tableData = tableData;\n        this.initTableDataAndTableDataOrigin();\n      },\n      getRowState(_hiddenRowId) {//使用_hiddenRowId获取当前行的状态，\n        // 已有数据初始或被修改过值得行，_hiddenRowId均为纯数字\n        // 被删除的行_hiddenRowId值为字母D开头\n        // 新增加的行_hiddenRowId值为字母A开头\n        if (!_hiddenRowId) {\n          return \'\';\n        } else if (_hiddenRowId.startsWith(\'D\')) {\n          return \'delete\';\n        } else if (_hiddenRowId.startsWith(\'A\')) {\n          return \'add\';\n        }\n      },\n      tableRowClassName({row, rowIndex}) {\n        if (!row._hiddenRowId) {\n          return \'\';\n        } else if (row._hiddenRowId.startsWith(\'A\')) {\n          return \'pre-add-row\';\n        } else if (row._hiddenRowId.startsWith(\'D\')) {\n          return \'pre-delete-row\';\n        }\n        return \'\';\n      },\n      tableCellClassName({row, column, rowIndex, columnIndex}) {\n        let classNames = \'\';\n        if (this.changedCellInfo[row._hiddenRowId] && this.changedCellInfo[row._hiddenRowId][column.columnKey]) {\n          classNames += \' pre-update-cell\';        //被修改的单元格角标样式\n        }\n        return classNames;\n      },\n      buildNewRowHiddenId() {\n        let newRowHiddenId = \'A\' + (Array(16)\n          .join(\'0\') + this.newRowHiddenId).slice(-16);\n        this.newRowHiddenId++;\n        return newRowHiddenId;\n      },\n      //table原数据加自定义_hiddenRowId列，单元格编辑的辅助定位参数。并留存原数据副本tableDataOrigin，用以编辑时撤销编辑，恢复内容[需在获取数据后马上调用]\n      initTableDataAndTableDataOrigin() {\n        let i = 1;\n        for (let row of this.tableData) {\n          //_hiddenRowId为定位行的辅助参数，请求的数据中不能包含此字段\n          this.$set(row, \'_hiddenRowId\', (Array(16).join(\'0\') + i).slice(-16));\n          i++;\n        }\n        this.tableDataOrigin = JSON.parse(JSON.stringify(this.tableData));\n      },\n      //通过行列坐标构建ref值的方法\n      buildCellRef(_hiddenRowId, columnId) {\n        // console.log(\'buildCellRef\',_hiddenRowId, columnId);\n        return \'Cell_\' + _hiddenRowId + \'_\' + columnId;\n      },\n      //单元格编辑状态 开关\n      isEditingCell(rowId, columnId, editType) {\n        return editType\n          && this.editingCellInfo.rowId === rowId\n          && this.editingCellInfo.columnId === columnId;\n      },\n      cellClickHandler(row, item) {\n        // console.log(\'row, column\', row, item);\n        this.startEdit(row, item);\n      },\n      //开始编辑(设置编辑中单元格信息)\n      startEdit(row, item) {\n        this.setEditKeyListener(false);\n        this.setEditKeyListener(true);\n        {//设置编辑中单元格 定位参数\n          if (row && row._hiddenRowId) {\n            this.editingCellInfo.rowId = row._hiddenRowId;\n          }\n          if (item && item.columnKey) {\n            this.editingCellInfo.columnId = item.columnKey;\n          }\n          if (item) {\n            this.editingCellInfo.columnOption = item;\n          }\n        }\n        this.editingCellFocusAndSelect();\n        // console.log(\'开始编辑\', column.columnKey);\n      },\n      //完成编辑（清除单元格编辑状态，清除按键监听事件）\n      finishEdit() {\n        this.editCellBlurHandler();\n        this.editingCellInfo = {\n          rowId: undefined,\n          columnId: undefined,\n          columnOption: undefined,\n        };\n        this.setEditKeyListener(false);\n      },\n      //编辑中单元格 焦点获取,文字选中\n      editingCellFocusAndSelect() {\n        let _hiddenRowId = this.editingCellInfo.rowId;\n        let columnId = this.editingCellInfo.columnId;\n        this.$nextTick(() => {\n          //以row._hiddenRowId，column.columnKey，发现单元格。\n          if (this.editingCellInfo.columnOption) {\n            switch (this.editingCellInfo.columnOption.editType) {\n              case \'Input\':\n              case \'InputNumber\':\n                let cellValue = this.tableData.find(e => e._hiddenRowId === this.editingCellInfo.rowId)[this.editingCellInfo.columnOption.propId];\n                this.$refs[this.buildCellRef(this.editingCellInfo.rowId, this.editingCellInfo.columnId)][0].value = cellValue === undefined ? \'\' : cellValue;\n            }\n          }\n          let cellEditorELArray = this.$refs[this.buildCellRef(_hiddenRowId, columnId)];\n          if (cellEditorELArray && cellEditorELArray.length > 0) {\n            if (cellEditorELArray[0].focus) {\n              cellEditorELArray[0].focus();\n            }\n            if (cellEditorELArray[0].select) {\n              cellEditorELArray[0].select();\n            }\n          }\n        });\n      },\n      //编辑中单元格失去焦点事件\n      editCellBlurHandler() {\n        console.log("blur!!")\n        this.setEditingValueToTableData();\n        this.setEditingCellInfoToChangedCellInfo(this.checkEditingValueIsChanged());\n      },\n      setEditingValueToTableData() {\n        let columnOption = this.editingCellInfo.columnOption;\n        if (columnOption) {\n          let row = this.getEditingRow();\n          switch (columnOption.editType) {\n            case \'Input\':\n            case \'InputNumber\':\n              let changeValue = this.$refs[this.buildCellRef(this.editingCellInfo.rowId, this.editingCellInfo.columnId)][0].value;\n              this.$set(row, columnOption.propId, changeValue);\n              break;\n            case \'Select\':\n            case \'SelectGroup\':\n              let selectList = columnOption.selectList;\n              let newText = null;\n              for (let selectItem of selectList) {\n                if (selectItem.value === row[columnOption.propId]) {\n                  newText = selectItem.label;\n                }\n              }\n              if (columnOption.selectList.findIndex(e => e.value === row[columnOption.propId]) >= 0) {\n                this.$set(row, columnOption.propId, row[columnOption.propId]);\n                this.$set(row, columnOption.propText, newText);\n              }\n              break;\n          }\n        }\n      },\n      //记录 被修改、值有误 等单元格信息到this.changedCellInfo中。\n      setEditingCellInfoToChangedCellInfo(isAdd) {\n        if (this.editingCellInfo.columnOption) {\n          let rowId = this.editingCellInfo.rowId;\n          let columnId = this.editingCellInfo.columnId;\n          let propId = this.editingCellInfo.columnOption.propId;//propId为要修改的数据。因为可能出现两列绑定同一个数据，列用columnKey区分，数据字段用propId记录\n          if (!this.changedCellInfo[rowId]) {\n            this.changedCellInfo[rowId] = {};\n          }\n          if (isAdd) {\n            this.changedCellInfo[rowId][columnId] = propId;\n          } else {\n            delete this.changedCellInfo[rowId][columnId];\n            if (Object.keys(this.changedCellInfo[rowId]).length === 0) {\n              delete this.changedCellInfo[rowId];\n            }\n          }\n        }\n      },\n      //将编辑中单元格 还原到未修改时的值\n      revokeEditingValueHandler() {\n        let columnOption = this.editingCellInfo.columnOption;\n        let propId = columnOption.propId;\n        let propText = columnOption.propText;\n        for (let rowOrigin of this.tableDataOrigin) {\n          if (rowOrigin._hiddenRowId === this.editingCellInfo.rowId) {\n            let row = this.getEditingRow();\n            this.$set(row, propId, rowOrigin[propId]);\n            this.$set(row, propText, rowOrigin[propText]);\n            {//将input类型的编辑框中值也重置，因为没使用v-model绑定变量，要手动重置\n              switch (columnOption.editType) {\n                case \'Input\':\n                case \'InputNumber\':\n                  this.$refs[this.buildCellRef(this.editingCellInfo.rowId, this.editingCellInfo.columnId)][0].value = rowOrigin[propId];\n                  break;\n              }\n            }\n          }\n        }\n\n        this.finishEdit();//撤销完失去焦点\n        // this.$refs[this.buildCellRef(this.editingCellInfo.rowId, this.editingCellInfo.columnId)][0].focus();//撤销完保持焦点\n      },\n      //切换正在编辑的单元格到下一个（direction>0）或上一个（direction<0）。\n      switchEditColumnHandler(direction) {\n        // console.log(\'Tab切换单元格\', this.editingCellInfo.rowId, this.editingCellInfo.columnId, this.editingCellInfo.columnKey);\n        let columnOptionOnlyCanEdit = this.columnOption.filter(e => e.editType);\n        if (this.editingCellInfo.rowId && this.editingCellInfo.columnId) {\n          for (let i = 0; i < columnOptionOnlyCanEdit.length; i++) {\n            if (columnOptionOnlyCanEdit[i].columnKey === this.editingCellInfo.columnId) {\n              let next = i;\n              if (direction > 0) {\n                next++;\n              } else if (direction < 0) {\n                next--;\n              }\n\n              if (direction > 0 && next < columnOptionOnlyCanEdit.length || direction < 0 && next >= 0) {\n                //跳下一个单元格\n                if (columnOptionOnlyCanEdit[next]) {\n                  this.$refs[this.buildCellRef(this.editingCellInfo.rowId, this.editingCellInfo.columnId)][0].blur();\n                  if (this.editingCellInfo.columnOption.editType === \'DatePicker\') {\n                    //焦点到el-date-picker控件，使用方向键修改日期后，不使用回车选中，而是直接tab切换下一单元格不会触发blur事件，但选中的时间已经修改\n                    //在此直接调用一次blur事件\n                    //(el-select控件使用以上操作方式也不会触发blur，但其选中的值不会被改变，无需将其做类似处理)\n                    this.editCellBlurHandler();\n                  }\n                  this.startEdit(undefined, columnOptionOnlyCanEdit[next]);\n                }\n              } else {\n                //跳行\n                let rowIndex = 0;\n                for (; rowIndex < this.tableData.length; rowIndex++) {\n                  if (this.tableData[rowIndex]._hiddenRowId === this.editingCellInfo.rowId) {\n                    break;\n                  }\n                }\n                if (direction > 0) {\n                  if (rowIndex >= this.tableData.length - 1) {\n                    this.addNewRowHandler();//超过最后一行时增加新行\n                  }\n                  let nextRow = this.tableData[++rowIndex];\n                  this.startEdit(nextRow, columnOptionOnlyCanEdit[0]);\n                } else if (direction < 0) {\n                  if (rowIndex > 0) {\n                    let preRow = this.tableData[--rowIndex];\n                    this.startEdit(preRow, columnOptionOnlyCanEdit.slice(-1)[0]);\n                  } else {\n                  }\n                }\n              }\n              // this.editingCellFocusAndSelect();\n              break;\n            }\n          }\n        }\n      },\n      // 添加/删除键盘监听事件（目的是为了仅在表格进入编辑状态时，才进行按键事件监听）\n      setEditKeyListener(isAdd) {\n        if (isAdd) {\n          window.addEventListener(\'keydown\', this.editCellKeyDownHandler, true);\n          window.addEventListener(\'keyup\', this.editCellKeyUpHandler, true);\n        } else {\n          try {\n            window.removeEventListener(\'keydown\', this.editCellKeyDownHandler, true);\n            window.removeEventListener(\'keyup\', this.editCellKeyUpHandler, true);\n          } catch (e) {\n          }\n        }\n      },\n      //键盘事件\n      editCellKeyUpHandler(event) {\n        if (event.key === \'Tab\' || event.keyCode === 9) {\n          this.tabKeyAlreadyDown = false;\n        }\n      },\n      //键盘事件。表格编辑快捷键操作\n      editCellKeyDownHandler(event) {\n        // console.log(\'按键值\', event.key, event.keyCode);\n        let needPreventDefault = false;\n        //Tab切换单元格\n        if ((event.key === \'Tab\' || event.keyCode === 9) && !event.shiftKey) {\n          needPreventDefault = true;\n          if (!this.tabKeyAlreadyDown) {\n            this.switchEditColumnHandler(1);\n            this.tabKeyAlreadyDown = true;\n          }\n        }\n        //Shift+Tab切换单元格\n        if ((event.key === \'Tab\' || event.keyCode === 9) && event.shiftKey) {\n          needPreventDefault = true;\n          if (!this.tabKeyAlreadyDown) {\n            this.switchEditColumnHandler(-1);\n            this.tabKeyAlreadyDown = true;\n          }\n        }\n        //Esc完成编辑\n        if ((event.key === \'Escape\' || event.keyCode === 27)) {\n          needPreventDefault = true;\n          this.finishEdit();\n        }\n        //Shift+Backspace撤销\n        if ((event.key === \'Backspace\' || event.keyCode === 8) && event.shiftKey) {\n          needPreventDefault = true;\n          this.revokeEditingValueHandler();\n        }\n        if (needPreventDefault) {\n          if (event.defaultPrevented) {\n            return;\n          }\n          if (event.preventDefault) {\n            event.preventDefault();\n          } else {\n            event.returnValue = false;\n          }\n        }\n      },\n      //检查编辑中单元格 新值与原值是否相同。customDataProps可以传入要检测的列标记，可检测自定义列（此示例未使用此参数）\n      checkEditingValueIsChanged(customDataProps) {\n        if (customDataProps || this.editingCellInfo.columnOption) {\n          let dataProps;\n          if (customDataProps) {\n            dataProps = customDataProps;\n          } else {\n            let columnOption = this.editingCellInfo.columnOption;\n            dataProps = [columnOption.propId, columnOption.propText];\n          }\n          let row = this.getEditingRow();\n          if (!row) {\n            return true;\n          }\n          let rowOrigin = this.getEditingRowOrigin();\n          if (!rowOrigin) {\n            return true;\n          }\n          for (let dataProp of dataProps) {\n            if (rowOrigin[dataProp] === null && row[dataProp] === null ||\n              rowOrigin[dataProp] === \'\' && row[dataProp] === \'\' ||\n              rowOrigin[dataProp] === null && row[dataProp] === \'\' ||\n              rowOrigin[dataProp] === \'\' && row[dataProp] === null\n            ) {\n              return false;\n            }\n            if (String(rowOrigin[dataProp]) !== String(row[dataProp])) {\n              return true;\n            }\n          }\n        }\n        return false;\n      },\n      //获取编辑中行 现数据\n      getEditingRow() {\n        for (let row of this.tableData) {\n          if (row._hiddenRowId === this.editingCellInfo.rowId) {\n            return row;\n          }\n        }\n        return {};\n      },\n      //获取编辑中行 原数据\n      getEditingRowOrigin() {\n        for (let row of this.tableDataOrigin) {\n          if (row._hiddenRowId === this.editingCellInfo.rowId) {\n            return row;\n          }\n        }\n        return {};\n      },\n\n      addNewRowHandler() {\n        this.tableData.push({_hiddenRowId: this.buildNewRowHiddenId()});\n      },\n      deleteRowHandler(row) {\n        if (row._hiddenRowId.startsWith(\'A\')) {\n          for (let rowIndex = 0; rowIndex < this.tableData.length; rowIndex++) {\n            if (this.tableData[rowIndex]._hiddenRowId === row._hiddenRowId) {\n              this.tableData.splice(rowIndex, 1);\n            }\n          }\n          return;\n        }\n        if (row._hiddenRowId.startsWith(\'D\')) {\n          if (this.changedCellInfo[row._hiddenRowId]) {\n            this.$set(this.changedCellInfo, row._hiddenRowId.substring(1), JSON.parse(JSON.stringify(this.changedCellInfo[row._hiddenRowId])));\n            this.$delete(this.changedCellInfo, row._hiddenRowId);\n          }\n          this.$set(row, "_hiddenRowId", row._hiddenRowId.substring(1));\n        } else {\n          if (this.changedCellInfo[row._hiddenRowId]) {\n            this.$set(this.changedCellInfo, \'D\' + row._hiddenRowId, JSON.parse(JSON.stringify(this.changedCellInfo[row._hiddenRowId])));\n            this.$delete(this.changedCellInfo, row._hiddenRowId);\n          }\n          this.$set(row, \'_hiddenRowId\', \'D\' + row._hiddenRowId);\n        }\n      },\n      //获取编辑修改的结果\n      getEditResult() {\n        this.finishEdit();\n        let submitData = {\n          update: [],//更新的内容\n          add: [],//增加的内容\n          delete: [],//删除的内容\n        };\n        this.tableData.forEach(item => {\n          if (item && item._hiddenRowId && item._hiddenRowId.length > 0) {\n            let itemTmp = JSON.parse(JSON.stringify(item));\n            switch (item._hiddenRowId.substr(0, 1)) {\n              case \'A\':\n                delete itemTmp._hiddenRowId;\n                submitData.add.push(itemTmp);//收集添加对象集合\n                break;\n              case \'D\':\n                if (itemTmp.id !== undefined) {\n                  submitData.delete.push(itemTmp.id);//收集删除id集合\n                }\n                break;\n              default:\n                for (let rowId in this.changedCellInfo) {\n                  if (item._hiddenRowId === rowId) {\n                    let itemTmp = {};\n                    this.changedCellInfo[rowId][\'_dataPrimaryKey\'] = this.dataPrimaryKey;\n                    for (let columnId in this.changedCellInfo[rowId]) {\n                      if (this.changedCellInfo[rowId].hasOwnProperty(columnId)) {\n                        let propId = this.changedCellInfo[rowId][columnId];\n                        itemTmp[propId] = item[propId];\n                      }\n                    }\n                    submitData.update.push(itemTmp);//收集更新对象集合\n                  }\n                }\n                break;\n            }\n          }\n        });\n        return submitData;\n      },\n      //重置记录单元格标记的对象\n      resetCell() {\n        this.finishEdit();\n        this.changedCellInfo = {};\n      },\n      preventLeavingPage() {\n        window.onbeforeunload = () => {\n          if (JSON.stringify(this.changedCellInfo) !== (\'{}\')) {\n            return \'退出将不保存您填写的数据，确定退出吗？\';\n          }\n        };\n      },\n    },\n    //使用router时，路由跳转提示表单编辑未保存\n    beforeRouteLeave(to, from, next) {\n      if (JSON.stringify(this.changedCellInfo) !== (\'{}\')) {\n        const answer = window.confirm(\'离开将丢失对表单的修改，确定离开本页？\');\n        if (answer) {\n          next();\n        } else {\n          next(false);\n        }\n      } else {\n        next();\n      }\n    },\n    deactivated() {\n      this.setEditKeyListener(false);\n    },\n    destroyed() {\n      this.setEditKeyListener(false);\n    },\n  };\n<\/script>\n\n<style scoped>\n  *, div, span, td, input {\n    font-size: 14px;\n    font-family: \'Arial\', "Microsoft YaHei", serif;\n  }\n\n  /*去除表格的行中，上下padding，统一行高*/\n  .el-table /deep/ td {\n    padding: 0;\n    line-height: 30px;\n    height: 30px;\n  }\n\n  /*调整单元格模板中div与单元格一样大*/\n  .el-table /deep/ .cell {\n    -webkit-box-sizing: border-box;\n    box-sizing: border-box;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: normal;\n    word-break: break-all;\n    line-height: 30px;\n    padding: 0 0 0 10px;\n  }\n\n  /*去除element-ui编辑框的padding*/\n  /deep/ .el-input__inner {\n    padding: 0;\n    font-size: 14px;\n    box-sizing: border-box;\n    height: 30px;\n    line-height: 30px;\n  }\n\n  /*去除element-ui编辑框的各种小图标或按钮*/\n  /deep/ .el-input__suffix {\n    display: none;\n  }\n\n  /deep/ .el-input__prefix {\n    display: none;\n  }\n\n  /*缩小button中的padding*/\n  .el-button--mini, .el-button--mini.is-round {\n    padding: 5px 5px;\n  }\n\n  /deep/ .pre-add-row /deep/ td {\n    /*background-color: red !important;*/\n    background-image: url(\'./static/img/grid/pre_add_corner.png\') !important;\n    background-position: 0 0;\n    background-size: 8px;\n    background-repeat: no-repeat;\n  }\n\n  /deep/ .pre-delete-row /deep/ td {\n    /*background-color: red !important;*/\n    background-image: url(\'./static/img/grid/pre_delete_corner.png\') !important;\n    background-position: 0 0;\n    background-size: 8px;\n    background-repeat: no-repeat;\n  }\n\n  /deep/ .pre-update-cell {\n    /*background-color: red !important;*/\n    background-image: url(\'./static/img/grid/pre_update_corner.png\');\n    background-position: 0 0;\n    background-size: 8px;\n    background-repeat: no-repeat;\n  }\n\n  /*input输入框为number类型时不显示箭头*/\n  /deep/ input::-webkit-outer-spin-button,\n  /deep/ input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n  }\n\n  /deep/ input[type="number"] {\n    -moz-appearance: textfield;\n  }\n\n\n</style>\n']}])},"549a":function(e,n){e.exports="data:image/png;base64,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"},"56d7":function(e,n,t){"use strict";t.r(n),t("cadf"),t("551c"),t("f751"),t("097d");var i=t("8bbf"),l=t.n(i),o=(t("456d"),t("20d6"),t("7514"),t("ac4d"),t("8a81"),t("f559"),t("ac6a"),t("bc3a")),d=t.n(o),a={name:"TableCellEdit",data:function(){return{tableData:void 0,tableDataOrigin:[],editingCellInfo:{rowId:void 0,columnId:void 0,columnOption:void 0},changedCellInfo:{},dataPrimaryKey:"id",columnOption:[{columnKey:"column1",minWidth:"100px",label:"文字",propId:"text",propText:"text",editType:"Input"},{columnKey:"column2",minWidth:"100px",label:"文字1",propId:"text1",propText:"text1",editType:"Input"},{columnKey:"column3",propId:"date",propText:"date",editType:"DatePicker",width:"150px",minWidth:"150px",label:"时间编辑"},{columnKey:"column4",minWidth:"100px",label:"数字",propId:"number",propText:"number",editType:"InputNumber"},{columnKey:"column5",minWidth:"140px",label:"不能编辑",propId:"textNoEdit",propText:"textNoEdit"},{columnKey:"column6",minWidth:"100px",label:"选择",propId:"selectValue",propText:"selectName",editType:"Select",selectList:[{value:10,label:"这个选项会被fetchSelectListData()方法中的值覆盖"}]}],newRowHiddenId:1,tabKeyAlreadyDown:!1}},mounted:function(){},created:function(){this.preventLeavingPage(),this.fetchData(),this.fetchSelectListData()},methods:{refreshData:function(){var e=this;"{}"!==JSON.stringify(this.changedCellInfo)?this.$confirm('检测到您有未提交保存的修改<br />刷新将<span style="color:#E6A23C;font-weight: bold">丢失未保存的修改</span>，是否继续？',{dangerouslyUseHTMLString:!0}).then((function(){e.fetchData()})).catch((function(){})):this.fetchData()},fetchData:function(){var e=this;d.a.post("/getTableDataApi").then((function(n){var t=n.data;e.setTableData(t.tableData)}))},fetchSelectListData:function(){var e=this;d.a.post("/getSelectListDataApi").then((function(n){var t=n.data;e.columnOption.forEach((function(e){"column6"===e.columnKey&&(e.selectList=t.selectListData)}))}))},submitHandler:function(){var e=this,n=this.getEditResult();d.a.post("/setTableDataApi",n).then((function(n){n.data.result&&(e.fetchData(),e.$notify({title:"提交成功，查看控制台",type:"success"}))}))},setTableData:function(e){this.resetCell(),this.tableData=e,this.initTableDataAndTableDataOrigin()},getRowState:function(e){return e?e.startsWith("D")?"delete":e.startsWith("A")?"add":void 0:""},tableRowClassName:function(e){var n=e.row;return e.rowIndex,n._hiddenRowId?n._hiddenRowId.startsWith("A")?"pre-add-row":n._hiddenRowId.startsWith("D")?"pre-delete-row":"":""},tableCellClassName:function(e){var n=e.row,t=e.column,i=(e.rowIndex,e.columnIndex,"");return this.changedCellInfo[n._hiddenRowId]&&this.changedCellInfo[n._hiddenRowId][t.columnKey]&&(i+=" pre-update-cell"),i},buildNewRowHiddenId:function(){var e="A"+(Array(16).join("0")+this.newRowHiddenId).slice(-16);return this.newRowHiddenId++,e},initTableDataAndTableDataOrigin:function(){var e=1,n=!0,t=!1,i=void 0;try{for(var l,o=this.tableData[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var d=l.value;this.$set(d,"_hiddenRowId",(Array(16).join("0")+e).slice(-16)),e++}}catch(e){t=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw i}}this.tableDataOrigin=JSON.parse(JSON.stringify(this.tableData))},buildCellRef:function(e,n){return"Cell_"+e+"_"+n},isEditingCell:function(e,n,t){return t&&this.editingCellInfo.rowId===e&&this.editingCellInfo.columnId===n},cellClickHandler:function(e,n){this.startEdit(e,n)},startEdit:function(e,n){this.setEditKeyListener(!1),this.setEditKeyListener(!0),e&&e._hiddenRowId&&(this.editingCellInfo.rowId=e._hiddenRowId),n&&n.columnKey&&(this.editingCellInfo.columnId=n.columnKey),n&&(this.editingCellInfo.columnOption=n),this.editingCellFocusAndSelect()},finishEdit:function(){this.editCellBlurHandler(),this.editingCellInfo={rowId:void 0,columnId:void 0,columnOption:void 0},this.setEditKeyListener(!1)},editingCellFocusAndSelect:function(){var e=this,n=this.editingCellInfo.rowId,t=this.editingCellInfo.columnId;this.$nextTick((function(){if(e.editingCellInfo.columnOption)switch(e.editingCellInfo.columnOption.editType){case"Input":case"InputNumber":var i=e.tableData.find((function(n){return n._hiddenRowId===e.editingCellInfo.rowId}))[e.editingCellInfo.columnOption.propId];e.$refs[e.buildCellRef(e.editingCellInfo.rowId,e.editingCellInfo.columnId)][0].value=void 0===i?"":i}var l=e.$refs[e.buildCellRef(n,t)];l&&0<l.length&&(l[0].focus&&l[0].focus(),l[0].select&&l[0].select())}))},editCellBlurHandler:function(){this.setEditingValueToTableData(),this.setEditingCellInfoToChangedCellInfo(this.checkEditingValueIsChanged())},setEditingValueToTableData:function(){var e=this.editingCellInfo.columnOption;if(e){var n=this.getEditingRow();switch(e.editType){case"Input":case"InputNumber":var t=this.$refs[this.buildCellRef(this.editingCellInfo.rowId,this.editingCellInfo.columnId)][0].value;this.$set(n,e.propId,t);break;case"Select":case"SelectGroup":var i=e.selectList,l=null,o=!0,d=!1,a=void 0;try{for(var r,s=i[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var c=r.value;c.value===n[e.propId]&&(l=c.label)}}catch(t){d=!0,a=t}finally{try{o||null==s.return||s.return()}finally{if(d)throw a}}0<=e.selectList.findIndex((function(t){return t.value===n[e.propId]}))&&(this.$set(n,e.propId,n[e.propId]),this.$set(n,e.propText,l))}}},setEditingCellInfoToChangedCellInfo:function(e){if(this.editingCellInfo.columnOption){var n=this.editingCellInfo.rowId,t=this.editingCellInfo.columnId,i=this.editingCellInfo.columnOption.propId;this.changedCellInfo[n]||(this.changedCellInfo[n]={}),e?this.changedCellInfo[n][t]=i:(delete this.changedCellInfo[n][t],0===Object.keys(this.changedCellInfo[n]).length&&delete this.changedCellInfo[n])}},revokeEditingValueHandler:function(){var e=this.editingCellInfo.columnOption,n=e.propId,t=e.propText,i=!0,l=!1,o=void 0;try{for(var d,a=this.tableDataOrigin[Symbol.iterator]();!(i=(d=a.next()).done);i=!0){var r=d.value;if(r._hiddenRowId===this.editingCellInfo.rowId){var s=this.getEditingRow();switch(this.$set(s,n,r[n]),this.$set(s,t,r[t]),e.editType){case"Input":case"InputNumber":this.$refs[this.buildCellRef(this.editingCellInfo.rowId,this.editingCellInfo.columnId)][0].value=r[n]}}}}catch(e){l=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(l)throw o}}this.finishEdit()},switchEditColumnHandler:function(e){var n=this.columnOption.filter((function(e){return e.editType}));if(this.editingCellInfo.rowId&&this.editingCellInfo.columnId)for(var t=0;t<n.length;t++)if(n[t].columnKey===this.editingCellInfo.columnId){var i=t;if(0<e?i++:e<0&&i--,0<e&&i<n.length||e<0&&0<=i)n[i]&&(this.$refs[this.buildCellRef(this.editingCellInfo.rowId,this.editingCellInfo.columnId)][0].blur(),"DatePicker"===this.editingCellInfo.columnOption.editType&&this.editCellBlurHandler(),this.startEdit(void 0,n[i]));else{for(var l=0;l<this.tableData.length&&this.tableData[l]._hiddenRowId!==this.editingCellInfo.rowId;l++);if(0<e){l>=this.tableData.length-1&&this.addNewRowHandler();var o=this.tableData[++l];this.startEdit(o,n[0])}else if(e<0&&0<l){var d=this.tableData[--l];this.startEdit(d,n.slice(-1)[0])}}break}},setEditKeyListener:function(e){if(e)window.addEventListener("keydown",this.editCellKeyDownHandler,!0),window.addEventListener("keyup",this.editCellKeyUpHandler,!0);else try{window.removeEventListener("keydown",this.editCellKeyDownHandler,!0),window.removeEventListener("keyup",this.editCellKeyUpHandler,!0)}catch(e){}},editCellKeyUpHandler:function(e){"Tab"!==e.key&&9!==e.keyCode||(this.tabKeyAlreadyDown=!1)},editCellKeyDownHandler:function(e){var n=!1;if("Tab"!==e.key&&9!==e.keyCode||e.shiftKey||(n=!0,this.tabKeyAlreadyDown||(this.switchEditColumnHandler(1),this.tabKeyAlreadyDown=!0)),"Tab"!==e.key&&9!==e.keyCode||!e.shiftKey||(n=!0,this.tabKeyAlreadyDown||(this.switchEditColumnHandler(-1),this.tabKeyAlreadyDown=!0)),"Escape"!==e.key&&27!==e.keyCode||(n=!0,this.finishEdit()),"Backspace"!==e.key&&8!==e.keyCode||!e.shiftKey||(n=!0,this.revokeEditingValueHandler()),n){if(e.defaultPrevented)return;e.preventDefault?e.preventDefault():e.returnValue=!1}},checkEditingValueIsChanged:function(e){if(e||this.editingCellInfo.columnOption){var n;if(e)n=e;else{var t=this.editingCellInfo.columnOption;n=[t.propId,t.propText]}var i=this.getEditingRow();if(!i)return!0;var l=this.getEditingRowOrigin();if(!l)return!0;var o=!0,d=!1,a=void 0;try{for(var r,s=n[Symbol.iterator]();!(o=(r=s.next()).done);o=!0){var c=r.value;if(null===l[c]&&null===i[c]||""===l[c]&&""===i[c]||null===l[c]&&""===i[c]||""===l[c]&&null===i[c])return!1;if(String(l[c])!==String(i[c]))return!0}}catch(e){d=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(d)throw a}}}return!1},getEditingRow:function(){var e=!0,n=!1,t=void 0;try{for(var i,l=this.tableData[Symbol.iterator]();!(e=(i=l.next()).done);e=!0){var o=i.value;if(o._hiddenRowId===this.editingCellInfo.rowId)return o}}catch(e){n=!0,t=e}finally{try{e||null==l.return||l.return()}finally{if(n)throw t}}return{}},getEditingRowOrigin:function(){var e=!0,n=!1,t=void 0;try{for(var i,l=this.tableDataOrigin[Symbol.iterator]();!(e=(i=l.next()).done);e=!0){var o=i.value;if(o._hiddenRowId===this.editingCellInfo.rowId)return o}}catch(e){n=!0,t=e}finally{try{e||null==l.return||l.return()}finally{if(n)throw t}}return{}},addNewRowHandler:function(){this.tableData.push({_hiddenRowId:this.buildNewRowHiddenId()})},deleteRowHandler:function(e){if(e._hiddenRowId.startsWith("A"))for(var n=0;n<this.tableData.length;n++)this.tableData[n]._hiddenRowId===e._hiddenRowId&&this.tableData.splice(n,1);else e._hiddenRowId.startsWith("D")?(this.changedCellInfo[e._hiddenRowId]&&(this.$set(this.changedCellInfo,e._hiddenRowId.substring(1),JSON.parse(JSON.stringify(this.changedCellInfo[e._hiddenRowId]))),this.$delete(this.changedCellInfo,e._hiddenRowId)),this.$set(e,"_hiddenRowId",e._hiddenRowId.substring(1))):(this.changedCellInfo[e._hiddenRowId]&&(this.$set(this.changedCellInfo,"D"+e._hiddenRowId,JSON.parse(JSON.stringify(this.changedCellInfo[e._hiddenRowId]))),this.$delete(this.changedCellInfo,e._hiddenRowId)),this.$set(e,"_hiddenRowId","D"+e._hiddenRowId))},getEditResult:function(){var e=this;this.finishEdit();var n={update:[],add:[],delete:[]};return this.tableData.forEach((function(t){if(t&&t._hiddenRowId&&0<t._hiddenRowId.length){var i=JSON.parse(JSON.stringify(t));switch(t._hiddenRowId.substr(0,1)){case"A":delete i._hiddenRowId,n.add.push(i);break;case"D":void 0!==i.id&&n.delete.push(i.id);break;default:for(var l in e.changedCellInfo)if(t._hiddenRowId===l){var o={};for(var d in e.changedCellInfo[l]._dataPrimaryKey=e.dataPrimaryKey,e.changedCellInfo[l])if(e.changedCellInfo[l].hasOwnProperty(d)){var a=e.changedCellInfo[l][d];o[a]=t[a]}n.update.push(o)}}}})),n},resetCell:function(){this.finishEdit(),this.changedCellInfo={}},preventLeavingPage:function(){var e=this;window.onbeforeunload=function(){if("{}"!==JSON.stringify(e.changedCellInfo))return"退出将不保存您填写的数据，确定退出吗？"}}},beforeRouteLeave:function(e,n,t){"{}"!==JSON.stringify(this.changedCellInfo)?window.confirm("离开将丢失对表单的修改，确定离开本页？")?t():t(!1):t()},deactivated:function(){this.setEditKeyListener(!1)},destroyed:function(){this.setEditKeyListener(!1)}},r=(t("130c"),t("2877")),s={name:"App",components:{TableCellEdit:Object(r.a)(a,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("el-form",{staticStyle:{height:"20px"},attrs:{inline:""}},[t("el-form-item",{staticStyle:{"margin-bottom":"0"}},[t("el-button",{staticClass:"custom-button-in-toolbar ",attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-refresh"},on:{click:e.refreshData}},[e._v("刷新\n      ")])],1),t("el-form-item",{staticStyle:{"margin-bottom":"0"}},[t("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-circle-plus"},on:{click:e.addNewRowHandler}},[e._v("新增")])],1),t("el-form-item",{staticStyle:{"margin-bottom":"0"}},[t("el-button",{attrs:{type:"success",plain:"",size:"mini",icon:"el-icon-success"},on:{click:e.submitHandler}},[e._v("提交保存")])],1),t("el-form-item",{staticStyle:{float:"right","margin-bottom":"0"}},[t("el-popover",{attrs:{trigger:"hover",placement:"bottom"}},[t("el-button",{attrs:{slot:"reference",type:"warning",plain:"",size:"mini"},slot:"reference"},[t("i",{staticClass:"el-icon-question"}),e._v("使用帮助")]),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{color:"#ff7435",display:"inline-block","font-weight":"bold"}},[e._v("所有操作均在“提交保存”后生效")])]),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"70px"}},[e._v("角标颜色")]),t("el-tag",{staticStyle:{"font-size":"12px","margin-right":"5px"},attrs:{size:"mini"}},[e._v("预增加")]),t("el-tag",{staticStyle:{"font-size":"12px","margin-right":"5px"},attrs:{size:"mini",type:"warning"}},[e._v("预修改")]),t("el-tag",{staticStyle:{"font-size":"12px","margin-right":"5px"},attrs:{size:"mini",type:"danger"}},[e._v("预删除")])],1),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{"font-weight":"bold",color:"#666"}},[e._v("快捷键（编辑单元格时）：")])]),t("div",{staticStyle:{"margin-left":"5px"}},[t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"80px"}},[e._v("下一单元格")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Tab")])],1),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"80px"}},[e._v("上一单元格")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Shift")]),t("span",[e._v("+")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Tab")])],1),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"80px"}},[e._v("撤销修改")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Shift")]),t("span",[e._v("+")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Backspace")])],1),t("div",{staticStyle:{height:"25px"}},[t("span",{staticStyle:{display:"inline-block","font-weight":"bold",width:"80px"}},[e._v("完成编辑")]),t("el-tag",{staticStyle:{"font-size":"12px",margin:"0 5px"},attrs:{size:"mini"}},[e._v("Esc")])],1)])],1)],1)],1),t("el-table",{ref:"Table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"400px","row-class-name":e.tableRowClassName,"cell-class-name":e.tableCellClassName}},[t("el-table-column",{attrs:{fixed:"left",type:"index",width:"50px",label:"序号",align:"center"}}),e._l(e.columnOption,(function(n){return t("el-table-column",{key:n.prop,attrs:{"min-width":n.minWidth,width:n.width,"column-key":n.columnKey,label:n.label,prop:n.propText},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditingCell(i.row._hiddenRowId,n.columnKey,n.editType),expression:"!isEditingCell(scope.row._hiddenRowId,item.columnKey,item.editType)"}],staticStyle:{"min-height":"30px"},style:{color:n.color},on:{click:function(t){return e.cellClickHandler(i.row,n)}}},[t("span",[e._v(e._s(i.row[n.propText]))])]),e.isEditingCell(i.row._hiddenRowId,n.columnKey,n.editType)?t("div",{staticStyle:{display:"table"}},[t("div",{staticStyle:{display:"table-cell",width:"100%"}},["Input"===n.editType?t("input",{ref:e.buildCellRef(i.row._hiddenRowId,n.columnKey),refInFor:!0,staticClass:"el-input el-input__inner",staticStyle:{width:"100%"},on:{blur:e.editCellBlurHandler}}):e._e(),"InputNumber"===n.editType?t("input",{ref:e.buildCellRef(i.row._hiddenRowId,n.columnKey),refInFor:!0,staticClass:"el-input el-input__inner",staticStyle:{width:"100%"},attrs:{type:"Number",placeholder:"输入数字"},on:{blur:e.editCellBlurHandler}}):e._e(),"DatePicker"===n.editType?t("el-date-picker",{ref:e.buildCellRef(i.row._hiddenRowId,n.columnKey),refInFor:!0,staticStyle:{width:"100%"},attrs:{clearable:!1,size:"mini","prefix-icon":" ",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},on:{blur:e.editCellBlurHandler},model:{value:i.row[n.propId],callback:function(t){e.$set(i.row,n.propId,t)},expression:"scope.row[item.propId]"}}):e._e(),"Select"===n.editType?t("el-select",{ref:e.buildCellRef(i.row._hiddenRowId,n.columnKey),refInFor:!0,attrs:{width:"100%",filterable:"","automatic-dropdown":!0,placeholder:"请选择"},on:{blur:e.editCellBlurHandler,change:e.editCellBlurHandler},model:{value:i.row[n.propId],callback:function(t){e.$set(i.row,n.propId,t)},expression:"scope.row[item.propId]"}},e._l(n.selectList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()],1),t("div",{staticStyle:{margin:"0"},style:{width:"add"===e.getRowState(i.row._hiddenRowId)?0:"26px"}},[t("el-popconfirm",{attrs:{placement:"right",title:"确定撤销更改？"},on:{onConfirm:e.revokeEditingValueHandler}},["add"!==e.getRowState(i.row._hiddenRowId)?t("el-button",{staticStyle:{margin:"0"},attrs:{slot:"reference",title:"撤销更改(Shift+Backspace)",type:"danger",plain:"",size:"mini",icon:"el-icon-refresh-left"},slot:"reference"}):e._e()],1)],1)]):e._e()]}}],null,!0)})})),t("el-table-column",{attrs:{width:"120px",prop:"selectValue",align:"center",label:"选择id(普通列)"}}),t("el-table-column",{attrs:{width:"120px",prop:"selectName",align:"center",label:"选择值(普通列)"}}),t("el-table-column",{attrs:{width:"60px",fixed:"right",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{staticStyle:{"margin-left":"-10px","font-size":"12px"},attrs:{title:"delete"===e.getRowState(n.row._hiddenRowId)?"取消删除":"删除",type:"delete"===e.getRowState(n.row._hiddenRowId)?"success":"danger",plain:"",size:"mini",icon:"delete"===e.getRowState(n.row._hiddenRowId)?"el-icon-refresh-left":"el-icon-delete"},on:{click:function(t){return e.deleteRowHandler(n.row)}}})]}}])})],2)],1)}),[],!1,null,"b0c56674",null).exports},data:function(){return{}}},c=Object(r.a)(s,(function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("table-cell-edit")],1)}),[],!1,null,null,null).exports,p=t("5f72"),u=t.n(p);l.a.config.productionTip=!1,l.a.use(u.a),t("9523"),new l.a({el:"#app",components:{App:c},template:"<App/>"})},"5f72":function(e,n){e.exports=ELEMENT},"8bbf":function(e,n){e.exports=Vue},9523:function(e,n,t){"use strict";t.r(n);var i=t("75fc"),l=(t("ac4d"),t("8a81"),t("ac6a"),t("96eb")),o=t.n(l);o.a.mock("/getSelectListDataApi","post",{selectListData:[{value:1,label:"1黄金糕"},{value:2,label:"2双皮奶"},{value:3,label:"3蚵仔煎"},{value:4,label:"4龙须面"},{value:5,label:"5北京烤鸭"}]});var d=[{id:10001,date:"2016-05-02",text:"张三",text1:"ff",number:511,textNoEdit:"不能编辑的列",selectValue:1,selectName:"1黄金糕"},{id:10002,date:"2017-05-04",text:"李四",text1:"vv",number:11,textNoEdit:"11",selectValue:2,selectName:"2双皮奶"},{id:10003,date:"2019-01-01",text:"王五",text1:"cc",number:213,textNoEdit:"一段文字",selectValue:3,selectName:"3蚵仔煎"},{id:10004,date:"2019-05-03",text:"赵六",text1:"aa",number:151,textNoEdit:"另一段文字",selectValue:4,selectName:"4龙须面"}];o.a.mock("/getTableDataApi","post",(function(e){return{tableData:d}}));var a=0,r=!1;o.a.mock("/setTableDataApi","post",(function(e){var n=JSON.parse(e.body);if(!r){var t=!0,l=!1,o=void 0;try{for(var s,c=d[Symbol.iterator]();!(t=(s=c.next()).done);t=!0){var p=s.value;void 0!==p.id&&(a=Math.max(a,p.id))}}catch(e){l=!0,o=e}finally{try{t||null==c.return||c.return()}finally{if(l)throw o}}r=!0}n.add.forEach((function(e){e.id||(e.id=++a)})),d.push.apply(d,Object(i.a)(n.add)),d=d.filter((function(e){return-1===n.delete.indexOf(e.id)}));var u=!0,h=!1,f=void 0;try{for(var g,w=n.update[Symbol.iterator]();!(u=(g=w.next()).done);u=!0){var m=g.value,A=!0,b=!1,I=void 0;try{for(var y,C=d[Symbol.iterator]();!(A=(y=C.next()).done);A=!0){var v=y.value;if(v.id===m.id)for(var x in m)m.hasOwnProperty(x)&&(v[x]=m[x])}}catch(e){b=!0,I=e}finally{try{A||null==C.return||C.return()}finally{if(b)throw I}}}}catch(e){h=!0,f=e}finally{try{u||null==w.return||w.return()}finally{if(h)throw f}}return{result:!0}}))},b8a2:function(e,n,t){var i=t("39ff");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),(0,t("499e").default)("55013bd9",i,!0,{sourceMap:!0,shadowMode:!1})},eecd:function(e,n){e.exports="data:image/png;base64,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"}});